(window.webpackJsonp=window.webpackJsonp||[]).push([[552],{384:function(t,e,n){"use strict";(function(t){var r=n(98),o=n(68),c=n(99),l=n(100),m=(n(205),n(145),n(50),n(161),n(60),n(46),n(76),n(72),n(132),n(49)),h=n(1071),f=n(31),d=n(216),v=n(321),_=n(421),y=n(633),T=n(285),D=new d.a.Store({state:v.default,mutations:_.default,actions:y.default});function S(t){return function t(e,n){if(e.length)for(var i=0;i<e.length;i++)if(e[i].children){var r=t(e[i].children,n);if(r)return r}else if(e[i].value==n)return e[i].title}(T,t)}var E=Symbol("showMessage"),k=function(){return Object(l.a)((function t(){Object(c.a)(this,t)}),[{key:"success",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[E]("success",t,e)}},{key:"warning",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[E]("warning",t,e)}},{key:"info",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[E]("info",t,e)}},{key:"error",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[E]("error",t,e)}},{key:E,value:function(t,e,n){if(n&&"undefined"!=typeof document){for(var r=document.getElementsByClassName("el-message"),o=!0,i=0;i<r.length;i++){var c=r[i].getElementsByClassName("el-message__content")[0].innerHTML;e!=c&&e.message!=c||(o=!1)}(0===r.length||o)&&f.Message[t](e)}else f.Message[t](e)}}])}(),w=new k;e.a=function(e){e.store&&(D=e.store),e.$// Removed for static mirror;var n=["/medunews/"],c="dialog"==t.env.LOGIN_TYPE?"dialogLogin":"login",l="服务异常，请稍后再试";function f(t){if(t&&t["not-prompt"])return!1;var e=t.url;if(n&&n.length>0)for(var i=0;i<n.length;i++){var r=n[i];if(e.startsWith(r))return!1}return!0}function d(t,e,path,n){var r={status:t,resultStatus:!1,message:e};n&&(r.response=n);try{r.timeSpan=(new Date).getTime()}catch(t){}return path&&(r.path=path),r}function v(t,e,n){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(regeneratorRuntime.mark((function t(n,r,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,l){if(m.a.removeToken(),n&&n.config&&D.state.tokenStatus){if(n.config.__retryCount=n.config.__retryCount||0,n.config.__retryCount+=1,n.config.__retryCount<=1)return D.dispatch("refresh_token",{req:o,app:r}).then((function(r){return r?(D.commit("setToken",r),console.log("url:".concat(n.config.url," 开始重发,次数:").concat(n.config.__retryCount,",状态:").concat(n.status)),setTimeout((function(){return t(e.$axios(n.config))}),500)):"/oauth/auth/user"==n.config.url?l(d(n.status,"未登录或登录已失效",n.config.url)):(n.config&&n.config["not-redirect-login"]||D.commit(c),D.commit("setTokenStatus",!1),void l(Promise.reject(d(n.status,"未登录或登录已失效",n.config.url,n))))})).catch((function(t){if("/oauth/auth/user"==n.config.url)return l(d(n.status,"未登录或登录已失效",n.config.url));n.config&&n.config["not-redirect-login"]||D.commit(c),D.commit("setTokenStatus",!1),l(Promise.reject(d(n.status,"未登录或登录已失效",n.config.url,n)))}));if("/oauth/auth/user"==n.config.url)return l(d(n.status,"未登录或登录已失效",n.config.url));m.a.getToken()?w.error("登录已失效，请重新登录"):w.error("未登录或登录已失效"),n.config&&n.config["not-redirect-login"]||D.commit(c),D.commit("setTokenStatus",!1),l(Promise.reject(d(n.status,"未登录或登录已失效",n.config.url,n)))}l(d(n.status,"未登录或登录已失效",n.config.url))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new FileReader;r.readAsText(e,"utf-8"),r.onload=function(){try{var e=JSON.parse(r.result);t(e)}catch(t){n(t)}}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.$// Removed for static mirror;if(t.headers=t.headers||{},!t.headers.clientId)try{var n=t.headers.referer||t.headers.common&&t.headers.common.referer;n||(n=window.location.href);var r=t.headers.host;!r&&n&&(r=function(t){if(!t)return"";t.indexOf("/")!=t.length-1&&(t+="/");var e=t.match(/^http(s)?:\/\/(.*?)\//);return e&&e.length>2?e[2]:""}(n)),r&&(t.headers.clientId=D.getters.getClientId(r))}catch(t){console.error("request1",t)}var o=h.a.sign("get"==t.method?function(t){if(!t||!t.includes("?"))return;var e=t.slice(t.indexOf("?")+1).split("&"),n={};return e.forEach((function(t){var e=t.split("=");2==e.length?n[e[0]||""]=e[1]:n[""]=e[0]})),n}(t.url):t.data);if(o)for(var c in o)t.headers[c]=o[c];e||D.state.token&&D.commit("setToken",D.state.token),e&&(t.headers.Authorization=e)}catch(t){console.error("request1",t)}return t}),(function(t){return console.error("request2",t),Promise.reject(t)})),e.$// Removed for static mirror;var e=t.data&&t.data.message;return f(t.config)?(w.error(e||"请求出错"+(0!=t.status?t.status:"")+"！"),t.data?(""===t.data.message&&(t.data.message=l),t.data):t):Promise.reject(d(t.status,"请求出错",t.config.url,t))}),function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){var o,c,m,h,_,T,E,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.response){t.next=4;break}return w.error(l),t.abrupt("return",Promise.reject(d(500,l)));case 4:if("blob"!=n.config.responseType||!o.data||"application/json"!=o.data.type){t.next=8;break}return t.next=7,y(o.data);case 7:o.data=t.sent;case 8:if(c=o.data&&o.data.message,401!=o.status){t.next=13;break}return m=Object(r.a)({$axios:e.$axios,store:D},"store",D),h={headers:o.config.headers},t.abrupt("return",v(o,m,h).then((function(t){return t})).catch((function(t){return t})));case 13:if(f(n.config)){t.next=15;break}return t.abrupt("return",Promise.reject(d(o.status,"请求出错",o.config.url,o)));case 15:if(403!=o.status){t.next=26;break}if(!o.headers||!o.headers["forbidden-method"]){t.next=24;break}if(_=["com.zkey.platformconsumer.controller.MetaVariableController.findMetaVariable"],T=o.headers["forbidden-method"],!(E=S(T))){t.next=24;break}return k='您当前没有"'.concat(E,'"的权限<br>如有需要，请').concat(D.state&&D.state.userInfo&&D.state.userInfo.id?"联系相关负责人":"登录系统"),_.includes(T)||w.error(k),t.abrupt("return",d(o.status,k,o.config.url));case 24:return w.error(c||"无权限访问"),t.abrupt("return",d(o.status,c||"无权限访问",o.config.url));case 26:if(502!=o.status&&504!=o.status){t.next=29;break}return w.error(l),t.abrupt("return",d(o.status,l,o.config.url));case 29:if(w.error(c||"请求出错"+(0!=o.status?o.status:"")+"！"),!o.data){t.next=33;break}return""===o.data.message&&(o.data.message=l),t.abrupt("return",o.data);case 33:return t.abrupt("return",Promise.reject(d(o.status,"请求出错",n.config.url,o)));case 34:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}).call(this,n(391))},677:function(t,e,n){"use strict";n(158),n(145),n(97),n(273),n(274);var r=n(98),o=(n(67),n(48),n(7)),c=n.n(o),l=n(31),m=n.n(l),h=n(419),f=n.n(h),d=n(1073),v=n(385);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}m.a.Dialog.props.closeOnClickModal.default=!1,["success","warning","info","error"].forEach((function(t){m.a.Message[t]=function(e){return Object(v.a)(e)&&!Object(d.a)(e)?m.a.Message(y(y({},e),{},{type:t})):m.a.Message({type:t,message:e,dangerouslyUseHTMLString:!0})}}));try{[m.a.Tooltip,m.a.Table.components.TableBody.components.ElTooltip].map((function(t){t.render=function(t){var e=this;this.popperVM&&(this.popperVM.node=t("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[t("div",{on:{mouseleave:function(){e.setExpectedState(!1),e.debounceClose()},mouseenter:function(){e.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[t("span",[this.$slots.content||this.content])])]));var n=this.getFirstElement();if(!n)return null;var data=n.data=n.data||{};return data.staticClass=this.addTooltipClass(data.staticClass),n},t.install=function(e){e.component(t.name,t)}}))}catch(t){console.error(t)}c.a.use(m.a,{locale:f.a})},678:function(t,e,n){"use strict";var r=n(7),o=n.n(r),c=n(1090);n(1368);o.a.use(c.a)},680:function(t,e,n){"use strict";var r=n(58),o=(n(97),n(63),n(7)),c=n.n(o);c.a.filter("unHtmlToText",(function(t){if(t){var e={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(t,n){return e[n]})).replace(/<[^<>]+?>/g,"")}return""})),c.a.filter("surveyTitle",(function(t,b){var title="";if(t){if(b.locale)try{var e=JSON.parse(b.title);t="object"==Object(r.a)(e)&&e?(title=JSON.parse(b.title))[b.locale]||title.default:b.title}catch(e){t=b.title}var n={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(t,e){return n[e]})).replace(/<[^<>]+?>/g,"")}return"暂无"})),c.a.filter("unescape",(function(html){return html.replace(html?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")})),c.a.filter("removeHtmlTab",(function(t){return t.replace(/<[^<>]+?>/g,"")})),c.a.filter("html2Escape",(function(t){return t.replace(/[<>&"]/g,(function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[t]}))})),c.a.filter("escape2Html",(function(t){var e={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(t,n){return e[n]}))})),c.a.filter("nbsp2Space",(function(t){var e={nbsp:" "};return t.replace(/&(nbsp);/gi,(function(t,n){return e[n]}))})),c.a.filter("trimBr",(function(t){return t=(t=(t=t.replace(/((\s|&nbsp;)*\r?\n){3,}/g,"\r\n\r\n")).replace(/^((\s|&nbsp;)*\r?\n)+/g,"")).replace(/((\s|&nbsp;)*\r?\n)+$/g,"")})),c.a.filter("mergeSpace",(function(t){return t=t.replace(/(\s|&nbsp;)+/g," ")})),c.a.filter("monthDay",(function(t){var e=new Date(1e3*t);return e.getMonth()+1+"月"+e.getDate()+"日"})),c.a.filter("yymmdd",(function(t){if(t){var e=new Date(t),n=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var o=e.getDate();o=o<10?"0"+o:o;var c=e.getHours();c=c<10?"0"+c:c;var l=e.getMinutes(),m=e.getSeconds();return n+"-"+r+"-"+o+" "+c+":"+(l=l<10?"0"+l:l)+":"+(m=m<10?"0"+m:m)}return""})),c.a.filter("ymd",(function(t){if(t){var e=new Date(t),n=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var o=e.getDate();return n+"-"+r+"-"+(o=o<10?"0"+o:o)}return""}))},681:function(t,e,n){"use strict";var r=n(7),o=n.n(r),c=n(124),l=n(1077),m=n(1091),h=n(543);o.a.prototype.$SurveyCreator=c,o.a.prototype.$SurveyCreatorExt=l.a,o.a.prototype.$SurveyKo=m.a,o.a.prototype.$SurveyKoExt=h.a},682:function(t,e,n){"use strict";e.a=function(t,e){t.$errorHandler=function(e){try{var n=e.data;n?t.error({statusCode:500,message:n.resultInfo}):t.error({statusCode:500,message:"服务器开小差了~"})}catch(e){t.error({statusCode:500,message:"服务器开小差了~"})}}}},683:function(t,e,n){"use strict";var r=n(7),o=n.n(r),c=n(1086),l=n(386);o.a.prototype.hasPermit=l.a.check,o.a.prototype.hasPermits=l.a.checks,o.a.use(c.a)},684:function(t,e,n){"use strict";var r=n(7),o=n.n(r),c=n(336);o.a.prototype.XLSX=c},685:function(t,e,n){"use strict";n(1720)},686:function(t,e,n){"use strict";var r=n(7),o=n.n(r),c=n(687);o.a.use(c.a),e.a=function(t){var e=t.app;t.store;e.i18n=new c.a({locale:"en",fallbackLocale:"en",messages:{cn:{},en:n(1878)}})}},688:function(t,e){},689:function(t,e,n){"use strict";var r=n(1087),o=n.n(r),c=n(7);n.n(c).a.use(o.a)},690:function(t,e,n){"use strict";var r=n(7),o=n.n(r),c=n(1088),l=n.n(c),m=(n(1879),n(53)),h=n.n(m);o.a.use(l.a),o.a.config.productionTip=!1,o.a.prototype.$axios=h.a},692:function(t,e,n){"use strict";var r=n(7),o=n.n(r),c=n(339),l=n(299),m=n(739),h=n(1082),f=n.n(h),d=n(740),v=n(741),_=n(742),y=n(743),T=n(744),D=n(732),view=n(716),main=n(745),S=n(705),E=n(710),k=n(746),w=n(747),C=n(703),A=n(722),$=n(717),P=n(748),x=n(749),O=n(500),R=n(718),N=n(501),I=n(719),L=n(502),j=n(720),M=n(750),X=n(733),U=n(751),H=n(1085),V=n.n(H),W=(n(1716),n(99)),B=n(100);n(97),n(48),n(60),n(46),n(132),n(50),n(89),n(72);function J(t,e,n){J.installed||(J.installed=!0,t.mixin({watch:{$route:function(t,e){this.$vueDataAc&&this.$vueDataAc.installed&&this.$vueDataAc._options.openPage&&this.$vueDataAc._mixinRouterWatch(t,e,!0)}},beforeCreate:function(){this.$vueDataAc&&this.$vueDataAc.installed&&this.$vueDataAc._options.openComponent&&this.$vueDataAc._mixinComponentsPerformanceStart(this),this._uid===this.$root._uid&&this.$vueDataAc&&this.$vueDataAc.installed&&this.$vueDataAc._options.openPage&&this.$vueDataAc._mixinRouterWatch(null,null,!1)},beforeDestroy:function(){var t=this;this.$vueDataAc&&this.$vueDataAc.installed&&this._uid===this.$root._uid&&(this.$vueDataAc.destroyTime&&(clearTimeout(this.$vueDataAc.destroyTime),this.$vueDataAc.destroyTime=null),this.$vueDataAc.destroyTime=setTimeout((function(e){var n=e.uid,r=e.root_uid;t.$vueDataAc&&t.$vueDataAc.installed&&n===r&&t.$vueDataAc&&t.$vueDataAc.postAcData()}),300,{uid:this._uid,root_uid:this.$root._uid}))},mounted:function(){this.$vueDataAc&&this.$vueDataAc.installed&&(this.$vueDataAc._options.openInput&&(this.$vueDataAc._componentLoadCount++,this.$nextTick((function(){0==--this.$vueDataAc._componentLoadCount&&this.$vueDataAc._mixinInputEvent(this)}))),this.$vueDataAc._options.openComponent&&this.$nextTick((function(){this.$vueDataAc._mixinComponentsPerformanceEnd(this)})))},beforeUpdate:function(){this.$vueDataAc&&this.$vueDataAc.installed&&this.$vueDataAc._options.openComponent&&this.$vueDataAc._mixinComponentsPerformanceStart(this)},updated:function(){this.$vueDataAc&&this.$vueDataAc.installed&&this.$vueDataAc._options.openComponent&&this.$nextTick((function(){this.$vueDataAc._mixinComponentsPerformanceEnd(this)}))}}),t.prototype.$vueDataAc=new n(e,t))}var F,z={storeVer:"__VERSION__",storeInput:"ACINPUT",storePage:"ACPAGE",storeClick:"ACCLIK",storeReqErr:"ACRERR",storeTiming:"ACTIME",storeCodeErr:"ACCERR",storeCustom:"ACCUSTOM",storeSourceErr:"ACSCERR",storePrmseErr:"ACPRERR",storeCompErr:"ACCOMP",storeVueErr:"ACVUERR",userSha:"vue_ac_userSha",useImgSend:!0,useStorage:!0,maxDays:365,openInput:!0,openCodeErr:!0,openClick:!0,openXhrQuery:!0,openXhrHock:!0,openPerformance:!0,openPage:!0,openVueErr:!0,openSourceErr:!0,openPromiseErr:!0,openComponent:!0,maxComponentLoadTime:1e3,openXhrTimeOut:!0,maxRequestTime:1e4,customXhrErrCode:"",selector:"input",ignoreInputType:["password","file"],clickClassTags:[],clickTagNames:[],clickAttrName:"data-ac",maxHelpfulCount:5,elAttrNames:[],ignorePages:[],imageUrl:"http://data.isjs.cn/lib/image/ac.png",postUrl:"http://data.isjs.cn/logStash/push",openReducer:!1,sizeLimit:20,cacheEventStorage:"ac_cache_data",manualReport:!1},K=n(714);n(63),n(145),n(186),n(160),n(146),n(76),n(161),n(245),n(158),n(67),n(138);function G(t){return!(0===t&&"0"===t||void 0!==t&&null!=t&&"null"!==t&&""!==t)}function Q(t){for(var e in t)return!1;return!0}function Y(path){return path?(path.startsWith("http://")||path.startsWith("https://")||(path.startsWith("/")||(path="/"+path),path=(window&&window.location&&window.location.origin)+path),path):path}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Object.prototype.toString.call(t)===Object.prototype.toString.call(document))return null;var r=t&&t.parentNode,o=t.className,c=void 0===o?"":o,l=t.tagName,m=void 0===l?"":l,h=t.id,f=t.value,d=t.innerText,v=tt(t),_=e.clickClassTags,y=e.clickTagNames,T=e.clickAttrName,D=e.maxHelpfulCount,S=c.split(" ");if(v[T])return t;if(!G(_)&&_.length>0||!G(y)&&y.length>0){var E=!0;return G(y)||(E=y.includes(m)),E||G(_)||(E=_.some((function(t){return S.includes(t)}))),!E&&G(r)||!E&&n>D?null:E?t:Z(r,e,++n)}return n>D?null:G(c)&&G(h)&&G(f)&&G(d)?G(r)?null:Z(r,e,++n):t}function tt(t,e){var n=t.attributes?t.attributes.length:0,r={};if(n>0)for(var i=0;i<n;i++){var o=t.attributes[i];e&&e.length>0&&!e.includes(o.nodeName)||(r[o.nodeName]=o.nodeValue.replace(/"/gim,"'"))}return r}function et(t,e,n,r){if(t.useStorage)window.localStorage.setItem(e,n);else{r||(r=t.maxDays);var o=new Date;o.setTime(o.getTime()+24*r*60*6e4),document.cookie="".concat(e,"=").concat(encodeURIComponent(n),";expires=").concat(o.toUTCString(),";path=/")}}function nt(t,e){if(!e)return null;if(t.useStorage)return window.localStorage.getItem(e);var n=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return n&&n.length>1?decodeURIComponent(n[2]):null}function at(){var t=new Date;return{timeStr:"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate()," ").concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds()),timeStamp:t.getTime()}}function ot(t){0}function st(t){var e=t.toString(),n=t.stack?t.stack.replace(/\n/gi,"").replace(/\bat\b/gi,"@").replace(/\?[^:]+/gi,"").replace(/^\s*|\s*$/g,"").split("@").slice(0,5).join("&&"):"";return n.indexOf(e)<0&&(n=e+"@"+n),n}var it=function(){return Object(B.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(W.a)(this,t);var r=function(t,e){for(var n={},r=Object.keys(e),i=0;i<r.length;i++)n[r[i]]=void 0!==t[r[i]]?t[r[i]]:e[r[i]];return n}(e,z);if(function(t){var e=!0;if(Q(t))return ot(),!1;if(["storeInput","storePage","storeClick","storeReqErr","storeTiming","storeCodeErr","storeCustom","storeSourceErr","storePrmseErr","storeCompErr","storeVueErr","userSha","useImgSend","useStorage","maxDays","openInput","openCodeErr","openClick","openXhrQuery","openXhrHock","openPerformance","openPage","openVueErr","openSourceErr","openPromiseErr","openComponent","openXhrTimeOut"].map((function(n){G(t[n])&&(ot("--------配置项【".concat(n,"】不能为空------")),e=!1)})),t.useImgSend){if(G(t.imageUrl))return ot(),!1}else if(G(t.postUrl))return ot(),!1;return t.openInput&&G(t.selector)||t.useStorage&&void 0===window.localStorage?(ot(),!1):e}(r)){r.elAttrNames&&(r.elAttrNames=r.elAttrNames.filter((function(t){return"class"!==t}))),r.ignorePages||(r.ignorePages=[]),this.installed=!0,this._options=r,this._vue_=n,F=this,this._uuid=nt(this._options,this._options.userSha),G(this._uuid)&&(this._uuid=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[],i=0;i<t;i++)r[i]=n[0|Math.random()*e];return r.join("")}(),et(this._options,this._options.userSha,this._uuid));var o=nt(this._options,this._options.cacheEventStorage);this._acData=G(o)?[]:JSON.parse(o),this._proxyXhrObj={},this._inputCacheData={},this._componentsTime={},this._lastRouterStr="",this._userToken="",this._beforeUserToken="",this._pageInTime=0,this._componentLoadCount=0,this._componentTimeCount=0,this._init()}else this.installed=!1}),[{key:"_init",value:function(){this._options.openVueErr&&this._initVueErrAc(),this._options.openCodeErr&&this._initCodeErrAc(),this._options.openSourceErr&&this._initSourceErrAc(),this._options.openPromiseErr&&this._initPromiseErrAc(),this._options.openClick&&this._initClickAc(),this._options.openXhrQuery&&this._initXhrErrAc(),this._options.openPerformance&&this._initPerformance()}},{key:"_mixinInputEvent",value:function(t){for(var e=this._options,n=e.ignoreInputType,r=e.selector,o=document.querySelectorAll(r),i=0,c=o.length;i<c;i++){var l=o[i];l.type&&n.indexOf(l.type.toLowerCase())<0&&(l.removeEventListener("input",this._formatInputEvent),l.removeEventListener("blur",this._formatBlurEvent),l.addEventListener("input",this._formatInputEvent),l.addEventListener("blur",this._formatBlurEvent))}}},{key:"_mixinComponentsPerformanceStart",value:function(t){var e=t.$vnode;G((void 0===e?{}:e).tag)||(t.$_vueAc_bc_time=at().timeStamp,t.$vueDataAc._componentTimeCount++)}},{key:"_mixinComponentsPerformanceEnd",value:function(t){var e=t.$_vueAc_bc_time,n=t.$vnode,r=(void 0===n?{}:n).tag;if(!G(e)&&!G(r)){var o=at().timeStamp,c=parseInt(o-e);c>=t.$vueDataAc._options.maxComponentLoadTime&&(G(t.$vueDataAc._componentsTime[r])&&(t.$vueDataAc._componentsTime[r]=[]),t.$vueDataAc._componentsTime[r].push(c)),0==--t.$vueDataAc._componentTimeCount&&!Q(t.$vueDataAc._componentsTime)&&(this._setAcData(t.$vueDataAc._options.storeCompErr,{componentsTimes:t.$vueDataAc._componentsTime}),t.$vueDataAc._componentsTime={})}}},{key:"_formatInputEvent",value:function(t){var e=window.event||t,n=e.srcElement?e.srcElement:e.target,r=n.id,o=n.className,c=n.value,l=n.innerText,m=tt(n,this._options.elAttrNames),h=c||l,f=at().timeStamp,d="";try{d=JSON.stringify(m)}catch(t){d="".concat(r,"-").concat(o)}var v=F._inputCacheData[d];v=G(v)||Q(v)?{value:"0:".concat(h),timeStamp:f}:{value:"".concat(v.value,",").concat(parseInt(f-v.timeStamp),":").concat(h),timeStamp:f},F._inputCacheData[d]=v}},{key:"_formatBlurEvent",value:function(t){var e=window.event||t,n=e.srcElement?e.srcElement:e.target,r=n.id,o=n.className,c=tt(n,this._options.elAttrNames),l="";try{l=JSON.stringify(c)}catch(t){l="".concat(r,"-").concat(o)}var m=F._inputCacheData[l];G(m)||(F._inputCacheData[l]=null,F._setAcData(F._options.storeInput,{eId:r,className:o,val:m.value,attrs:c}))}},{key:"_mixinRouterWatch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o="",c={},l="",m={},h="";this._options.ignorePages;if(r?(o=Y(e.fullPath||e.path)||e.name,c=e.query||{},l=Y(n.fullPath||n.path)||n.name,m=n.query||{},h=this._lastRouterStr):(h=nt(this._options,"_vueac_".concat(this._options.storePage))||"",o=window.location.href,c=function(){var t={},e=window.location.search;if(!e)return t;try{new URLSearchParams(e),Object(K.a)("params")}catch(n){e.slice(e.indexOf("?")+1).split("&").forEach((function(e){var n=e.split("=");2==n.length?t[n[0]]=n[1]:t[n[0]]=""}))}return t}()||{},l=h,m={}),!(this._isIgnorePage(o)||h==="".concat(o,"-").concat(JSON.stringify(c))||r&&(G(o)||G(l)))){this._lastRouterStr="".concat(o,"-").concat(JSON.stringify(c)),et(this._options,"_vueac_".concat(this._options.storePage),this._lastRouterStr);var f=at().timeStamp;setTimeout((function(e){t._setAcData(t._options.storePage,{toPath:o,toParams:c,fromPath:l,formParams:m,nowTime:e}),t._options.openReducer&&!t._options.manualReport&&t.postAcData&&t.postAcData()}),1e3,f)}}},{key:"_initClickAc",value:function(){var t=this;document.addEventListener("click",(function(e){var n=window.event||e,r=Z(n.srcElement?n.srcElement:n.target,t._options);if(!G(r)){var o=r.className,c=r.id,l=r.value,m=r.innerText;c||(c=function(t){if(t.id)return t.id;for(var e=[];t.parentElement;){var n=t.tagName.toLowerCase(),r=t.id?"#".concat(t.id):"",o=t.className?".".concat(t.className.trim().replace(/\s+/g,".")):"",c=n;if(o&&(c=o),r&&(c=r),!r){var l=Array.from(t.parentElement.children);if(l.length>1){var m=l.indexOf(t);m>0&&(c+=":".concat(m))}}if(e.unshift(c),t=t.parentElement,e.length>=6)break}return e.join(">")}(r));var h=tt(r,t._options.elAttrNames);if(o&&o.includes("__"))return;t._setAcData(t._options.storeClick,{eId:c,className:o,val:(l||m||"").substr(0,20).trim(),attrs:h})}}))}},{key:"_initXhrErrAc",value:function(){var t=// Removed for static mirror;this._proxyXhrObj={open:function(){return this._ac_method=(arguments[0]||[])[0],t&&t.apply(this,arguments)},send:function(){return this._ac_send_time=at().timeStamp,this._ac_post_data=(arguments[0]||[])[0]||"",this.addEventListener("error",(function(t){F._formatXhrErrorData(t.target)})),this.onreadystatechange=function(t){F._formatXhrErrorData(t.target),n&&n.apply(this,arguments)},e&&e.apply(this,arguments)}},// Removed for static mirror;var e=this._options.ignorePages;try{var n=new URL(t);if(e&&n)for(var i in e)if(e[i]&&n.pathname.startsWith(e[i]))return!0}catch(t){}return!1}},{key:"_formatXhrErrorData",value:function(t){var e=t,n=e.method,r=e.send_time,o=void 0===r?0:r,c=e.post_data,l=void 0===c?{}:c,m=e.readyState;if(4===m){var h=e.status,f=e.statusText,d=e.response,v=e.responseURL,_=at().timeStamp,y=_-(o||_),T=F._options,D=T.openXhrTimeOut,S=T.storeReqErr,E=T.customXhrErrCode,k=T.openXhrQuery,w=y>F._options.maxRequestTime,C=!(h>=200&&h<208)&&0!==h&&302!==h,A=!G(E)&&"".concat(d&&d.code)===E,$=!G(v)&&v===F._options.postUrl;(D&&w||C||A)&&!$&&F._setAcData(S,{responseURL:v,method:n,isHttpErr:C,isCustomErr:A,readyState:m,status:h,statusText:f,requestTime:y,response:(""+d).substr(0,100),query:k?l:""})}}},{key:"_initPerformance",value:function(){if(window.performance){var t=(window.performance||{}).timing;if(!G(t)){var e={WT:t.responseStart-t.navigationStart,TCP:t.connectEnd-t.connectStart,ONL:t.loadEventEnd-t.loadEventStart,ALLRT:t.responseEnd-t.requestStart,TTFB:t.responseStart-t.navigationStart,DNS:t.domainLookupEnd-t.domainLookupStart};this._setAcData(this._options.storeTiming,e)}}}},{key:"_initVueErrAc",value:function(){var t=this;this._vue_&&this._vue_.config&&(this._vue_.config.errorHandler=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=n._isVue?n.$options&&n.$options.name||n.$options&&n.$options._componentTag:n.name,c=n._isVue&&n.$options&&n.$options.__file?n.$options&&n.$options.__file:"",l=n.$options&&n.$options.propsData;t._setAcData(t._options.storeVueErr,{componentName:o,fileName:c,propsData:l,info:r,msg:e.message||"",stack:st(e)})})}},{key:"_initCodeErrAc",value:function(){var t=arguments,e=this;window.onerror=function(n,r,line,col,o){if(G(r)&&"Script error."===n)return!1;var c={msg:n,line:line,col:col};c.col=col||window.event&&window.event.errorCharacter||0,setTimeout((function(){if(o&&o.stack)c.err=o.stack.toString();else if(t.callee){for(var n=[],r=t.callee.caller,l=3;r&&--l>0&&(n.push(r.toString()),r!==r.caller);)r=r.caller;n=n.join(","),c.err=n}else c.err="script err";e._setAcData(e._options.storeCodeErr,c)}),0)}}},{key:"_initSourceErrAc",value:function(){var t=this;window.addEventListener("error",(function(e){if("[object Event]"===[].toString.call(e,e)){var n=e.target||e.srcElement||e.originalTarget||{},r=n.href,o=n.src,c=n.currentSrc,l=n.localName,m=n.tagName||l,h=n.outerHTML,f=r||o;if("IMG"===m&&!G(n.onerror))return!1;h&&h.length>200&&(h=h.slice(0,200)),t._setAcData(t._options.storeSourceErr,{tagName:m,outerHTML:h,resourceUri:f,currentSrc:c})}}))}},{key:"_initPromiseErrAc",value:function(){var t=this;window.addEventListener("unhandledrejection",(function(e){t._setAcData(t._options.storePrmseErr,{reason:e.reason||"unknown"}),e.preventDefault()}))}},{key:"_setAcData",value:function(t,data){var e=this,n={uuid:this._uuid,t:this._userToken};switch(this._beforeUserToken&&(n.bt=this._beforeUserToken),t){case this._options.storePage:var r=data.toPath,o=data.toParams,c=data.fromPath,l=data.formParams,m=data.nowTime,h=this._pageInTime;m||(m=at().timeStamp),this._pageInTime=m,n.acData={type:this._options.storePage,sTme:m,fromPath:c,formParams:l,toPath:r,toParams:o,inTime:h,outTime:m};break;case this._options.storeInput:var f=data.eId,d=data.className,v=data.val,_=data.attrs;n.acData={type:this._options.storeInput,path:window.location.href,sTme:at().timeStamp,eId:f,className:d,val:v,attrs:_};break;case this._options.storeClick:var y,T=data.eId,D=data.className,S=data.val,E=data.attrs,k=at().timeStamp;if(this._acData.length>0&&(y=this._acData[this._acData.length-1]),y&&y.acData.eId==T)if(k-(y.acData.eTme||y.acData.sTme)<5e3)return y.acData.num=y.acData.num?y.acData.num+1:2,void(y.acData.eTme=k);n.acData={type:this._options.storeClick,path:window.location.href,sTme:k,eId:T,className:D,val:S,attrs:E};break;case this._options.storeReqErr:var w=data.responseURL,C=data.method,A=data.isHttpErr,$=data.isCustomErr,P=data.readyState,x=data.status,O=data.statusText,R=data.requestTime,N=data.response,I=data.query;n.acData={type:this._options.storeReqErr,path:window.location.href,sTme:at().timeStamp,errSubType:A?"http":$?"custom":"time",responseURL:w,method:C,readyState:P,status:x,statusText:O,requestTime:R,response:N,query:I};break;case this._options.storeVueErr:var L=data.componentName,j=data.fileName,M=data.propsData,X=data.info,U=data.msg,H=data.stack;n.acData={type:this._options.storeVueErr,path:window.location.href,sTme:at().timeStamp,componentName:L,fileName:j,propsData:M,info:X,msg:U,err:H};break;case this._options.storeCodeErr:var V=data.msg,line=data.line,col=data.col,W=data.err;n.acData={type:this._options.storeCodeErr,path:window.location.href,sTme:at().timeStamp,msg:V,line:line,col:col,err:W};break;case this._options.storeSourceErr:var B=data.tagName,J=data.outerHTML,F=data.resourceUri,z=data.currentSrc;n.acData={type:this._options.storeSourceErr,path:window.location.href,sTme:at().timeStamp,fileName:z,resourceUri:F,tagName:B,outerHTML:J};break;case this._options.storePrmseErr:var K=data.reason;n.acData={type:this._options.storePrmseErr,path:window.location.href,sTme:at().timeStamp,reason:K};break;case this._options.storeCustom:var G=data.cusKey,Q=data.cusVal;n.acData={type:this._options.storeCustom,path:window.location.href,sTme:at().timeStamp,cusKey:G,cusVal:Q};break;case this._options.storeTiming:var Y=data.WT,Z=data.TCP,tt=data.ONL,nt=data.ALLRT,st=data.TTFB,it=data.DNS;n.acData={type:this._options.storeTiming,path:window.location.href,sTme:at().timeStamp,WT:Y,TCP:Z,ONL:tt,ALLRT:nt,TTFB:st,DNS:it};break;case this._options.storeCompErr:var ct=data.componentsTimes;n.acData={type:this._options.storeCompErr,path:window.location.href,sTme:at().timeStamp,componentsTimes:ct};break;default:ot()}var ut=n.acData.toPath||n.acData.path;if(!this._isIgnorePage(ut)){var title=document.title;title.includes("-")&&(title=title.substring(0,title.lastIndexOf("-")).trim()),n.title=title||"",this._acData.push(n),this._options.openReducer?(et(this._options,this._options.cacheEventStorage,JSON.stringify(this._acData)),!this._options.manualReport&&this._options.sizeLimit&&this._acData.length>=this._options.sizeLimit&&(this._vue_&&this._vue_.$nextTick?this._vue_.$nextTick((function(){e.postAcData()})):this.postAcData())):this._vue_&&this._vue_.$nextTick?this._vue_.$nextTick((function(){e.postAcData()})):this.postAcData()}}},{key:"setCustomAc",value:function(data){var t=data.cusKey,e=void 0===t?"custom":t,n=data.cusVal,r=void 0===n?"":n;this._setAcData(this._options.storeCustom,{cusKey:e,cusVal:r})}},{key:"postAcData",value:function(){if(!G(this._acData)&&0!==this._acData.length){var t,e,n=JSON.stringify(this._acData);this._options.useImgSend?(new Image).src="".concat(this._options.imageUrl,"?acError=").concat(encodeURIComponent(n)):function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.type=(n.type||"GET").toUpperCase(),n.dataType=n.dataType||"json",n.async=n.async||!0,n.data&&(e=n.data),window.// Removed for static mirror; charset=UTF-8"),e?t.send(e):t.send())}({type:"POST",dataType:"json",contentType:"application/json",data:n,url:this._options.postUrl}),this._acData=[],t=this._options,e=this._options.cacheEventStorage,t.useStorage?window.localStorage.removeItem(e):et(t,e,"",-1)}}},{key:"setUserToken",value:function(t){this._userToken=t}},{key:"setBeforeUserToken",value:function(t){this._beforeUserToken=t}}])}();it.install=function(t,e){return J(t,e,it)},it.version="__VERSION__",o.a.prototype.aiSurvey=c.aiSurvey,o.a.prototype.showNoAuthMessage=l.showNoAuthMessage,o.a.use(f.a),o.a.use(D.default),o.a.use(view.default),o.a.use(R.default),o.a.use(I.default),o.a.use(j.default),o.a.use($.default),o.a.use(V.a),o.a.component("user-card",y.default),o.a.component("nav-list",m.default),o.a.component("icon-selector",d.default),o.a.component("select-infinite",v.default),o.a.component("local-upload",_.default),o.a.component("preview-file",T.default),o.a.component("lazy-transfer",main.default),o.a.component("ckeditor4",S.default),o.a.component("bpmn-form",E.default),o.a.component("content-box-left",k.default),o.a.component("cron",w.default),o.a.component("query-builder",C.default),o.a.component("select-variable",A.default),o.a.component("code-phone",P.default),o.a.component("code-email",x.default),o.a.component("verify-user",O.default),o.a.component("bind-user",N.default),o.a.component("real-name-user",L.default),o.a.component("invite-user",M.default),o.a.component("article-comments",X.default),o.a.component("survey-view",U.default),o.a.use(it,{openReducer:!0,sizeLimit:5,useImgSend:!0,useStorage:!0,openInput:!1,openCodeErr:!1,openClick:!0,clickClassTags:["el-button","el-tabs__item","menu-item","nav-list"],clickTagNames:["a","button"],elAttrNames:["id","class","name","title","value","src","alt"],ignorePages:["/account/callback","/console/"],openXhrQuery:!1,openXhrHock:!1,openPerformance:!1,openPage:!0,openVueErr:!1,openSourceErr:!1,openPromiseErr:!1,openComponent:!1,openXhrTimeOut:!1,imageUrl:"/api/project/userBehavior/image/ac.png"})}}]);