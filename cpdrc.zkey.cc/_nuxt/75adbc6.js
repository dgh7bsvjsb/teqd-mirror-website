(window.webpackJsonp=window.webpackJsonp||[]).push([[1176],{1904:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var o=n(1),r=n(24),l=n(96),c=n(354),d=n(42),y=n(8),h=n(34),f=n(14),v=n(17),x=n(0),L=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},m=function(e){function t(t){return e.call(this,t)||this}return Object(o.a)(t,e),t.prototype.getDefaultShape=function(){return new L},t.prototype.buildPath=function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},t.prototype.highlight=function(){Object(y.r)(this)},t.prototype.downplay=function(){Object(y.C)(this)},t}(r.b),I=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._focusAdjacencyDisabled=!1,n}return Object(o.a)(t,e),t.prototype.render=function(e,t,n){var o=this,r=e.getGraph(),c=this.group,h=e.layoutInfo,L=h.width,I=h.height,w=e.getData(),E=e.getData("edge"),M=e// Removed for static mirror,T=V.getModel("lineStyle"),N=T.get("curveness"),k=t.node1.getLayout(),G=t.node1.getModel(),A=G.get("localX"),P=G.get("localY"),C=t.node2.getLayout(),z=t.node2.getModel(),B=z.get("localX"),F=z.get("localY"),X=t.getLayout();n.shape.extent=Math.max(1,X.dy),n.shape.orient=M,"vertical"===M?(r=(null!=A?A*L:k.x)+X.sy,l=(null!=P?P*I:k.y)+k.dy,d=(null!=B?B*L:C.x)+X.ty,w=r,S=l*(1-N)+(h=null!=F?F*I:C.y)*N,O=d,D=l*N+h*(1-N)):(r=(null!=A?A*L:k.x)+k.dx,l=(null!=P?P*I:k.y)+X.sy,w=r*(1-N)+(d=null!=B?B*L:C.x)*N,S=l,O=r*N+d*(1-N),D=h=(null!=F?F*I:C.y)+X.ty),n.setShape({x1:r,y1:l,x2:d,y2:h,cpx1:w,cpy1:S,cpx2:O,cpy2:D}),n.useStyle(T.getItemStyle()),j(n.style,M,t);var Y=""+V.get("value"),_=Object(f.e)(V,"edgeLabel");Object(f.g)(n,_,{labelFetcher:{getFormattedLabel:function(t,n,o,r,l,c){return e.getFormattedLabel(t,n,"edge",r,Object(x.retrieve3)(l,_.normal&&_.normal// Removed for static mirror;var R=V.getModel("emphasis");Object(y.I)(n,V,"lineStyle",(function(e){var style=e.getItemStyle();return j(style,M,t),style})),c.add(n),E.setItemGraphicEl(t.dataIndex,n);var J=R.get("focus");Object(y.J)(n,"adjacency"===J?t.getAdjacentDataIndices():"trajectory"===J?t.getTrajectoryDataIndices():J,R.get("blurScope"),R.get("disabled"))})),r.eachNode((function(t){var n=t.getLayout(),o=t.getModel(),r=o.get("localX"),d=o.get("localY"),h=o.getModel("emphasis"),x=o.get(["itemStyle","borderRadius"])||0,rect=new l.a({shape:{x:null!=r?r*L:n.x,y:null!=d?d*I:n.y,width:n.dx,height:n.dy,r:x},style:o.getModel("itemStyle").getItemStyle(),z2:10});Object(f.g)(rect,Object(f.e)(o),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(t,n,"node")}},labelDataIndex:t.dataIndex,defaultText:t.id}),rect.disableLabelAnimation=!0,rect.setStyle("fill",t.getVisual("color")),rect.setStyle("decal",t.getVisual("style").decal),Object(y.I)(rect,o),c.add(rect),w.setItemGraphicEl(t.dataIndex,rect),Object(v.a)(rect).dataType="node";var m=h.get("focus");Object(y.J)(rect,"adjacency"===m?t.getAdjacentDataIndices():"trajectory"===m?t.getTrajectoryDataIndices():m,h.get("blurScope"),h.get("disabled"))})),w.eachItemGraphicEl((function(t,r){w.getItemModel(r).get("draggable")&&(t.drift=function(t,l){o._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=l,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:w.getRawIndex(r),localX:this.shape.x/L,localY:this.shape.y/I})},t.ondragend=function(){o._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")})),!this._data&&e.isAnimationEnabled()&&c.setClipPath(function(rect,e,t){var n=new l.a({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});return d.c(n,{shape:{width:rect.width+20}},e,t),n}(c.getBoundingRect(),e,(function(){c.removeClipPath()}))),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(h.a);function j(e,t,n){switch(e.fill){case"source":e.fill=n.node1.getVisual("color"),e.decal=n.node1.getVisual("style").decal;break;case"target":e.fill=n.node2.getVisual("color"),e.decal=n.node2.getVisual("style").decal;break;case"gradient":var o=n.node1.getVisual("color"),r=n.node2.getVisual("color");Object(x.isString)(o)&&Object(x.isString)(r)&&(e.fill=new c.a(0,0,+("horizontal"===t),+("vertical"===t),[{color:o,offset:0},{color:r,offset:1}]))}}var w=I,E=n(35),M=n(524),S=n(38),O=n(54),D=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return Object(o.a)(t,e),t.prototype.getInitialData=function(option,e){var t=option.edges||option.links,n=option.data||option.nodes,o=option.levels;this.levelModels=[];for(var r=this.levelModels,i=0;i<o.length;i++)null!=o[i].depth&&o[i].depth>=0&&(r[o[i].depth]=new S.a(o[i],this,e));if(n&&t){var l=Object(M.a)(n,t,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){var n=e.parentModel,o=n.getData().getItemLayout(t);if(o){var r=o.depth,l=n.levelModels[r];l&&(e.parentModel=l)}return e})),t.wrapMethod("getItemModel",(function(e,t){var n=e.parentModel,o=n.getGraph().getEdgeByIndex(t).node1.getLayout();if(o){var r=o.depth,l=n.levelModels[r];l&&(e.parentModel=l)}return e}))}));return l.data}},t.prototype.setNodePosition=function(e,t){var n=(this.option.data||this.option.nodes)[e];n.localX=t[0],n.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,n){function o(e){return isNaN(e)||null==e}if("edge"===n){var r=this.getDataParams(e,n),l=r.data,c=r.value,d=l.source+" -- "+l.target;return Object(O.c)("nameValue",{name:d,value:c,noValue:o(c)})}var y=this.getGraph().getNodeByIndex(e).getLayout().value,h=this.getDataParams(e,n).data.name;return Object(O.c)("nameValue",{name:null!=h?h+"":null,value:y,noValue:o(y)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(t,n){var o=e.prototype.getDataParams.call(this,t,n);if(null==o.value&&"node"===n){var r=this.getGraph().getNodeByIndex(t).getLayout().value;o.value=r}return o},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(E.b),V=D,T=n(20),N=n(5);function k(e,t){e.eachSeriesByType("sankey",(function(e){var n=e.get("nodeWidth"),o=e// Removed for static mirror:I.setLayout({dx:n},!0);for(var E=0;E<I.outEdges.length;E++){var M=I.outEdges[E];d[t.indexOf(M)]=0;var S=M.node2;0==--y[e.indexOf(S)]&&f.indexOf(S)<0&&f.push(S)}}++v,h=f,f=[]}for(i=0;i<d.length;i++)if(1===d[i])throw new Error("Sankey is a DAG, the original data has cycle!");var O=L>v-1?L:v-1;c&&"left"!==c&&function(e,t,n,o){if("right"===t){for(var r=[],l=e,c=0;l.length;){for(var i=0;i<l.length;i++){var d=l[i];d.setLayout({skNodeHeight:c},!0);for(var y=0;y<d.inEdges.length;y++){var h=d.inEdges[y];r.indexOf(h.node1)<0&&r.push(h.node1)}}l=r,r=[],++c}x.each(e,(function(e){G(e)||e.setLayout({depth:Math.max(0,o-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){x.each(e,(function(e){G(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,o)}(e,c,0,O);var D="vertical"===l?(r-n)/O:(o-n)/O;!function(e,t,n){x.each(e,(function(e){var o=e.getLayout().depth*t;"vertical"===n?e.setLayout({y:o},!0):e.setLayout({x:o},!0)}))}(e,D,l)})(e,t,n,r,l,d,y),function(e,t,n,o,r,l,c){var d=function(e,t){var n=[],o="vertical"===t?"y":"x",r=Object(N.j)(e,(function(e){return e.getLayout()[o]}));return r.keys.sort((function(a,b){return a-b})),x.each(r.keys,(function(e){n.push(r.buckets.get(e))})),n}(e,c);(function(e,t,n,o,r,l){var c=1/0;x.each(e,(function(e){var t=e.length,d=0;x.each(e,(function(e){d+=e.getLayout().value}));var y="vertical"===l?(o-(t-1)*r)/d:(n-(t-1)*r)/d;y<c&&(c=y)})),x.each(e,(function(e){x.each(e,(function(e,i){var t=e.getLayout().value*c;"vertical"===l?(e.setLayout({x:i},!0),e.setLayout({dx:t},!0)):(e.setLayout({y:i},!0),e.setLayout({dy:t},!0))}))})),x.each(t,(function(e){var t=+e.getValue()*c;e.setLayout({dy:t},!0)}))})(d,t,n,o,r,c),A(d,r,n,o,c);for(var y=1;l>0;l--)P(d,y*=.99,c),A(d,r,n,o,c),R(d,y,c),A(d,r,n,o,c)}(e,t,l,r,o,c,d),function(e,t){var n="vertical"===t?"x":"y";x.each(e,(function(e){e.outEdges.sort((function(a,b){return a.node2.getLayout()[n]-b.node2.getLayout()[n]})),e.inEdges.sort((function(a,b){return a.node1.getLayout()[n]-b.node1.getLayout()[n]}))})),x.each(e,(function(e){var t=0,n=0;x.each(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),x.each(e.inEdges,(function(e){e.setLayout({ty:n},!0),n+=e.getLayout().dy}))}))}(e,d)}(y,h,n,o,l,c,0!==x.filter(y,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),e.get("orient"),e// Removed for static mirror{var c,d,y;e.sort((function(a,b){return a.getLayout()[l]-b.getLayout()[l]}));for(var h=0,f=e.length,v="vertical"===r?"dx":"dy",i=0;i<f;i++)(y=h-(d=e[i]).getLayout()[l])>0&&(c=d.getLayout()[l]+y,"vertical"===r?d.setLayout({x:c},!0):d.setLayout({y:c},!0)),h=d.getLayout()[l]+d.getLayout()[v]+t;if((y=h-t-("vertical"===r?o:n))>0){c=d.getLayout()[l]-y,"vertical"===r?d.setLayout({x:c},!0):d.setLayout({y:c},!0),h=c;for(i=f-2;i>=0;--i)(y=(d=e[i]).getLayout()[l]+d.getLayout()[v]+t-h)>0&&(c=d.getLayout()[l]-y,"vertical"===r?d.setLayout({x:c},!0):d.setLayout({y:c},!0)),h=d.getLayout()[l]}}))}function P(e,t,n){x.each(e.slice().reverse(),(function(e){x.each(e,(function(e){if(e.outEdges.length){var o=_(e.outEdges,C,n)/_(e.outEdges,Y);if(isNaN(o)){var r=e.outEdges.length;o=r?_(e.outEdges,z,n)/r:0}if("vertical"===n){var l=e.getLayout().x+(o-X(e,n))*t;e.setLayout({x:l},!0)}else{var c=e.getLayout().y+(o-X(e,n))*t;e.setLayout({y:c},!0)}}}))}))}function C(e,t){return X(e.node2,t)*e.getValue()}function z(e,t){return X(e.node2,t)}function B(e,t){return X(e.node1,t)*e.getValue()}function F(e,t){return X(e.node1,t)}function X(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function Y(e){return e.getValue()}function _(e,t,n){for(var o=0,r=e.length,i=-1;++i<r;){var l=+t(e[i],n);isNaN(l)||(o+=l)}return o}function R(e,t,n){x.each(e,(function(e){x.each(e,(function(e){if(e.inEdges.length){var o=_(e.inEdges,B,n)/_(e.inEdges,Y);if(isNaN(o)){var r=e.inEdges.length;o=r?_(e.inEdges,F,n)/r:0}if("vertical"===n){var l=e.getLayout().x+(o-X(e,n))*t;e.setLayout({x:l},!0)}else{var c=e.getLayout().y+(o-X(e,n))*t;e.setLayout({y:c},!0)}}}))}))}var J=n(105);function H(e){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph(),n=t.nodes,o=t.edges;if(n.length){var r=1/0,l=-1/0;x.each(n,(function(e){var t=e.getLayout().value;t<r&&(r=t),t>l&&(l=t)})),x.each(n,(function(t){var n=new J.a({type:"color",mappingMethod:"linear",dataExtent:[r,l],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),o=t.getModel().get(["itemStyle","color"]);null!=o?(t.setVisual("color",o),t.setVisual("style",{fill:o})):(t.setVisual("color",n),t.setVisual("style",{fill:n}))}))}o.length&&x.each(o,(function(e){var t=e.getModel().get("lineStyle");e.setVisual("style",t)}))}))}function W(e){e.registerChartView(w),e.registerSeriesModel(V),e.registerLayout(k),e.registerVisual(H),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))}}}]);