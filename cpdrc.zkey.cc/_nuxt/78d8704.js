(window.webpackJsonp=window.webpackJsonp||[]).push([[1124],{1654:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=y(r(41)),o=y(r(61)),h=y(r(994)),c=y(r(83)),d=r(253),f=R(r(64)),v=R(r(102)),m=r(625),w=r(108),x=r(179);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var l={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in e)if("default"!==h&&Object.prototype.hasOwnProperty.call(e,h)){var desc=o?Object.getOwnPropertyDescriptor(e,h):null;desc&&(desc.get||desc.set)?Object.defineProperty(l,h,desc):l[h]=e[h]}return l.default=e,r&&r.set(e,l),l}function y(e){return e&&e.__esModule?e:{default:e}}function T(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,i){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,n,l=[],o=!0,h=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(l.push(r.value),!i||l.length!==i);o=!0);}catch(e){h=!0,n=e}finally{try{o||null==t.return||t.return()}finally{if(h)throw n}}return l}(e,i)||S(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function D(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(t){I(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=f.default.setCellValue,F=f.default.hasChildrenList,$=f.default.getColumnList,L=v.default.calcHeight,A=v.default.hasClass,z=v.default.addClass,V=v.default.removeClass,H=v.default.getEventTargetNode,B=v.default.isNodeElement,W=v.browse["-webkit"]&&!v.browse.edge,N=v.browse.msie?80:20,P="VXE_TABLE_CUSTOM_COLUMN_WIDTH",_="VXE_TABLE_CUSTOM_COLUMN_VISIBLE",j="VXE_TABLE_CUSTOM_COLUMN_FIXED";function Y(){return l.default.uniqueId("row_")}function X(e,t,r){var n=l.default.get(e,r),o=l.default.get(t,r);return!(!(0,f.eqEmptyValue)(n)||!(0,f.eqEmptyValue)(o))||(l.default.isString(n)||l.default.isNumber(n)?""+n==""+o:l.default.isEqual(n,o))}function U(e,t){var r=e.sortOpts.orders,n=t.order||null,l=r.indexOf(n)+1;return r[l<r.length?l:0]}function K(e){var t=o.default.version,r=l.default.toStringJSON(localStorage.getItem(e));return r&&r._v===t?r:{_v:t}}var G=function(e,t){var r=e.fullAllDataRowIdData,n={};return l.default.each(t,(function(e,t){r[t]&&(n[t]=e)})),n};function J(e,t){var r=e.fullDataRowIdData,n=[];return l.default.each(t,(function(e,t){r[t]&&-1===n.indexOf(r[t].row)&&n.push(r[t].row)})),n}function Z(e){var t=e.$refs,r=e.visibleColumn,n=t.tableBody,l=n?n.$el:null;if(l){for(var o=l.scrollLeft,h=o+l.clientWidth,c=-1,d=0,f=0,v=0,m=r.length;v<m&&(d+=r[v].renderWidth,-1===c&&o<d&&(c=v),!(c>=0&&(f++,d>h)));v++);return{toVisibleIndex:Math.max(0,c),visibleSize:Math.max(8,f)}}return{toVisibleIndex:0,visibleSize:8}}function Q(e,t,r){for(var n=0,l=e.length;n<l;n++){var o=e[n],h=t.startIndex,c=t.endIndex,d=o[r],f=d+o[r+"span"];d<h&&h<f&&(t.startIndex=d),d<c&&c<f&&(t.endIndex=f),t.startIndex===h&&t.endIndex===c||(n=-1)}}function ee(e,t,r,n){if(t){var o=e.treeConfig,h=e.visibleColumn;l.default.isArray(t)||(t=[t]),o&&t.length&&(0,w.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach((function(e){var t=e.row,col=e.col,o=e.rowspan,c=e.colspan;if(n&&l.default.isNumber(t)&&(t=n[t]),l.default.isNumber(col)&&(col=h[col]),(n?t:l.default.isNumber(t))&&col&&(o||c)&&(o=l.default.toNumber(o)||1,c=l.default.toNumber(c)||1,o>1||c>1)){var d=l.default.findIndexOf(r,(function(e){return e._row===t&&e._col===col})),f=r[d];if(f)f.rowspan=o,f.colspan=c,f._rowspan=o,f._colspan=c;else{var v=n?n.indexOf(t):t,m=h.indexOf(col);r.push({row:v,col:m,rowspan:o,colspan:c,_row:t,_col:col,_rowspan:o,_colspan:c})}}}))}}function te(e,t,r,n){var o=[];if(t){var h=e.treeConfig,c=e.visibleColumn;l.default.isArray(t)||(t=[t]),h&&t.length&&(0,w.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach((function(e){var t=e.row,col=e.col;n&&l.default.isNumber(t)&&(t=n[t]),l.default.isNumber(col)&&(col=c[col]);var h=l.default.findIndexOf(r,(function(e){return e._row===t&&e._col===col}));if(h>-1){var d=r.splice(h,1);o.push(d[0])}}))}return o}function ie(e){e.tableFullColumn.forEach((function(e){e.order=null}))}function re(e,t){var r=t.sortBy,n=t.sortType;return function(o){var h;return h=r?l.default.isFunction(r)?r({row:o,column:t}):l.default.get(o,r):e.getCellLabel(o,t),n&&"auto"!==n?"number"===n?l.default.toNumber(h):"string"===n?l.default.toValueString(h):h:isNaN(h)?h:l.default.toNumber(h)}}var ne={callSlot:function(e,t,r,n){if(e){var o=this.$xegrid;if(o)return o.callSlot(e,t,r,n);if(l.default.isFunction(e))return(0,x.getSlotVNs)(e.call(this,t,r,n))}return[]},getParentElem:function(){var e=this.$el,t=this.$xegrid;return t?t.$el.parentNode:e.parentNode},getParentHeight:function(){var e=this.$el,t=this.$xegrid,r=this.height,n=e.parentNode,o="auto"===r?(0,v.getPaddingTopBottomSize)(n):0;return Math.floor(t?t.getParentHeight():l.default.toNumber(getComputedStyle(n).height)-o)},getExcludeHeight:function(){var e=this.$xegrid;return e?e.getExcludeHeight():0},clearAll:function(){return(0,d.clearTableAllStatus)(this)},syncData:function(){var e=this;return(0,w.warnLog)("vxe.error.delFunc",["syncData","getData"]),this.$nextTick().then((function(){return e.tableData=[],e.$nextTick().then((function(){return e.loadTableData(e.tableFullData)}))}))},updateData:function(){var e=this,t=this.scrollXLoad,r=this.scrollYLoad;return this.handleTableData(!0).then((function(){if(e.updateFooter(),e.checkSelectionStatus(),t||r)return t&&e.updateScrollXSpace(),r&&e.updateScrollYSpace(),e.refreshScroll()})).then((function(){return e.updateCellAreas(),e.recalculate(!0)})).then((function(){setTimeout((function(){return e.recalculate()}),50)}))},handleTableData:function(e){var t=this,r=this.scrollYLoad,n=this.scrollYStore,l=this.fullDataRowIdData,o=this.afterFullData;e&&(this.updateAfterFullData(),o=this.handleVirtualTreeToList());var h=r?o.slice(n.startIndex,n.endIndex):o.slice(0);return h.forEach((function(e,r){var n=(0,d.getRowid)(t,e),o=l[n];o&&(o.$index=r)})),this.tableData=h,this.$nextTick()},updateScrollYStatus:function(e){var t=this.treeConfig,r=this.treeOpts,n=this.sYOpts,l=r.transform,o=e||this.tableFullData,h=(l||!t)&&!!n.enabled&&n.gt>-1&&(0===n.gt||n.gt<=o.length);return this.scrollYLoad=h,h},loadTableData:function(e){var t=this,r=this.keepSource,n=this.treeConfig,o=this.treeOpts,h=this.editStore,c=this.scrollYStore,f=this.scrollXStore,v=this.lastScrollLeft,m=this.lastScrollTop,w=this.scrollYLoad,x=this.sXOpts,C=this.sYOpts,R=o.children||o.childrenField,y=[],T=e?e.slice(0):[];n&&(o.transform?T=(y=l.default.toArrayTree(T,{key:o.rowField,parentKey:o.parentField,children:R,mapChildren:o.mapChildrenField})).slice(0):y=T.slice(0)),c.startIndex=0,c.endIndex=1,f.startIndex=0,f.endIndex=1,h.insertList=[],h.insertMaps={},h.removeList=[],h.removeMaps={};var E=this.updateScrollYStatus(T);return this.scrollYLoad=E,this.tableFullData=T,this.tableFullTreeData=y,this.cacheRowMap(!0),this.tableSynchData=e,r&&this.cacheSourceMap(T),this.clearCellAreas&&this.mouseConfig&&(this.clearCellAreas(),this.clearCopyCellArea()),this.clearMergeCells(),this.clearMergeFooterItems(),this.handleTableData(!0),this.updateFooter(),this.$nextTick().then((function(){t.updateHeight(),t.updateStyle()})).then((function(){t.computeScrollLoad()})).then((function(){return E&&(c.endIndex=c.visibleSize),t.handleReserveStatus(),t.checkSelectionStatus(),new Promise((function(e){t.$nextTick().then((function(){return t.recalculate()})).then((function(){var r=v,n=m;x.scrollToLeftOnChange&&(r=0),C.scrollToTopOnChange&&(n=0),w===E?(0,d.restoreScrollLocation)(t,r,n).then(e):setTimeout((function(){return(0,d.restoreScrollLocation)(t,r,n).then(e)}))}))}))}))},loadData:function(e){var t=this,r=this.inited,n=this.initStatus;return this.loadTableData(e).then((function(){return t.inited=!0,t.initStatus=!0,n||t.handleLoadDefaults(),r||t.handleInitDefaults(),t.recalculate()}))},reloadData:function(e){var t=this,r=this.inited;return this.clearAll().then((function(){return t.inited=!0,t.initStatus=!0,t.loadTableData(e)})).then((function(){return t.handleLoadDefaults(),r||t.handleInitDefaults(),t.recalculate()}))},reloadRow:function(e,t,r){var n=this.keepSource,o=this.tableSourceData,h=this.tableData;if(n){var c=o[this.getRowIndex(e)];if(c&&e)if(r){var d=l.default.get(t||e,r);l.default.set(e,r,d),l.default.set(c,r,d)}else{var f=l.default.clone(M({},t),!0);l.default.destructuring(c,Object.assign(e,f))}this.tableData=h.slice(0)}else 0;return this.$nextTick()},loadColumn:function(e){var t=this,r=l.default.mapTree(e,(function(e){return h.default.createColumn(t,e)}),{children:"children"});return this.handleColumn(r)},reloadColumn:function(e){var t=this;return this.clearAll().then((function(){return t.loadColumn(e)}))},handleColumn:function(e){var t=this;this.collectColumn=e;var r=$(e);return this.tableFullColumn=r,this.cacheColumnMap(),this.restoreCustomStorage(),this.parseColumns().then((function(){t.scrollXLoad&&t.loadScrollXData(!0)})),this.clearMergeCells(),this.clearMergeFooterItems(),this.handleTableData(!0),this.$nextTick().then((function(){return t.$toolbar&&t.$toolbar.syncUpdate({collectColumn:e,$table:t}),t.recalculate()}))},cacheRowMap:function(source){var e=this,t=this.treeConfig,r=this.treeOpts,n=this.tableFullData,o=this.fullDataRowMap,h=this.fullAllDataRowMap,c=this.tableFullTreeData,v=this.fullDataRowIdData,m=this.fullAllDataRowIdData,w=r.children||r.childrenField,x=r.hasChild||r.hasChildField,C=(0,d.getRowkey)(this),R=t&&r.lazy,y=function(r,n,c,path,y,T){var E=(0,d.getRowid)(e,r),S=t&&path?(0,d.toTreePathSeq)(path):n+1,k=T?T.length-1:0;(0,f.eqEmptyValue)(E)&&(E=Y(),l.default.set(r,C,E)),R&&r[x]&&l.default.isUndefined(r[w])&&(r[w]=null);var D={row:r,rowid:E,seq:S,index:t&&y?-1:n,_index:-1,$index:-1,items:c,parent:y,level:k};source&&(v[E]=D,o.set(r,D)),m[E]=D,h.set(r,D)};source&&(v=this.fullDataRowIdData={},o.clear()),m=this.fullAllDataRowIdData={},h.clear(),t?l.default.eachTree(c,y,{children:w}):n.forEach(y)},cacheSourceMap:function(e){var t=this,r=this.treeConfig,n=this.treeOpts,o=this.sourceDataRowIdData,h=l.default.clone(e,!0),c=(0,d.getRowkey)(this);o=this.sourceDataRowIdData={};var v=function(e){var r=(0,d.getRowid)(t,e);(0,f.eqEmptyValue)(r)&&(r=Y(),l.default.set(e,c,r)),o[r]={row:e,rowid:r}};if(r&&!n.transform){var m=n.children||n.childrenField;l.default.eachTree(h,v,{children:n.transform?n.mapChildrenField:m})}else h.forEach(v);this.tableSourceData=h},loadTreeChildren:function(e,t){var r=this,n=this.keepSource,o=this.tableSourceData,h=this.treeOpts,c=this.fullDataRowIdData,f=this.fullDataRowMap,v=this.fullAllDataRowMap,m=this.fullAllDataRowIdData,w=this.sourceDataRowIdData,x=h.transform,C=h.mapChildrenField,R=h.children||h.childrenField,y=m[(0,d.getRowid)(this,e)],T=y?y.level:0;return this.createData(t).then((function(t){if(n){var h=(0,d.getRowid)(r,e),y=l.default.findTree(o,(function(e){return h===(0,d.getRowid)(r,e)}),{children:R});y&&(y.item[R]=l.default.clone(t,!0)),t.forEach((function(e){var t=(0,d.getRowid)(r,e);w[t]=l.default.clone(e,!0)}))}return l.default.eachTree(t,(function(t,n,l,path,o,h){var w=(0,d.getRowid)(r,t),x={row:t,rowid:w,seq:-1,index:n,_index:-1,$index:-1,items:l,parent:o||e,level:T+h.length};c[w]=x,f.set(t,x),m[w]=x,v.set(t,x)}),{children:R}),e[R]=t,x&&(e[C]=t),r.updateAfterDataIndex(),t}))},cacheColumnMap:function(){var e,t,r,n,o=this.tableFullColumn,h=this.collectColumn,c=this.fullColumnMap,d=this.showOverflow,f=(this.columnOpts,this.rowOpts,this.fullColumnIdData={}),v=this.fullColumnFieldData={},m=h.some(F),x=!!d,C=function(l,o,h,path,d){var m=l.id,C=l.field,R=l.fixed,y=l.type,T=l.treeNode,E={column:l,colid:m,index:o,items:h,parent:d};C&&(v[C]=E),!n&&R&&(n=R),r||"html"!==y||(r=l),T?t||(t=l):"expand"===y&&(e||(e=l)),x&&!1===l.showOverflow&&(x=!1),f[m]&&(0,w.errLog)("vxe.error.colRepet",["colId",m]),f[m]=E,c.set(l,E)};c.clear(),m?l.default.eachTree(h,(function(e,t,r,path,n,l){e.level=l.length,C(e,t,r,0,n)})):o.forEach(C),this.isGroup=m,this.treeNodeColumn=t,this.expandColumn=e,this.isAllOverflow=x},getRowNode:function(tr){if(tr){var e=this.fullAllDataRowIdData[tr.getAttribute("rowid")];if(e)return{rowid:e.rowid,item:e.row,index:e.index,items:e.items,parent:e.parent}}return null},getColumnNode:function(e){if(e){var t=this.fullColumnIdData[e.getAttribute("colid")];if(t)return{colid:t.colid,item:t.column,index:t.index,items:t.items,parent:t.parent}}return null},getRowSeq:function(e){var t=this.fullDataRowIdData;if(e){var r=t[(0,d.getRowid)(this,e)];if(r)return r.seq}return-1},getRowIndex:function(e){return this.fullDataRowMap.has(e)?this.fullDataRowMap.get(e).index:-1},getVTRowIndex:function(e){return this.afterFullData.indexOf(e)},_getRowIndex:function(e){return this.getVTRowIndex(e)},getVMRowIndex:function(e){return this.tableData.indexOf(e)},$getRowIndex:function(e){return this.getVMRowIndex(e)},getColumnIndex:function(e){return this.fullColumnMap.has(e)?this.fullColumnMap.get(e).index:-1},getVTColumnIndex:function(e){return this.visibleColumn.indexOf(e)},_getColumnIndex:function(e){return this.getVTColumnIndex(e)},getVMColumnIndex:function(e){return this.tableColumn.indexOf(e)},$getColumnIndex:function(e){return this.getVMColumnIndex(e)},isSeqColumn:function(e){return e&&"seq"===e.type},defineField:function(e){var t=this,r=this.radioOpts,n=this.checkboxOpts,o=this.treeConfig,h=this.treeOpts,c=this.expandOpts,v=h.children||h.childrenField,m=(0,d.getRowkey)(this);return l.default.isArray(e)||(e=[e||{}]),e.map((function(e){return t.tableFullColumn.forEach((function(t){var r=t.field,n=t.editRender;if(r&&!l.default.has(e,r)){var o=null;if(n){var h=n.defaultValue;l.default.isFunction(h)?o=h({column:t}):l.default.isUndefined(h)||(o=h)}l.default.set(e,r,o)}})),[r.labelField,n.checkField,n.labelField,c.labelField].forEach((function(t){t&&(0,f.eqEmptyValue)(l.default.get(e,t))&&l.default.set(e,t,null)})),o&&h.lazy&&l.default.isUndefined(e[v])&&(e[v]=null),(0,f.eqEmptyValue)(l.default.get(e,m))&&l.default.set(e,m,Y()),e}))},createData:function(e){var t=this;return this.$nextTick().then((function(){return t.defineField(e)}))},createRow:function(e){var t=l.default.isArray(e);return t||(e=[e]),this.createData(e).then((function(e){return t?e:e[0]}))},revertData:function(e,t){var r=this,n=this.keepSource,o=this.tableSourceData,h=this.treeConfig;if(!n)return this.$nextTick();var c=e;return e?l.default.isArray(e)||(c=[e]):c=l.default.toArray(this.getUpdateRecords()),c.length&&c.forEach((function(e){if(!r.isInsertByRow(e)){var n=r.getRowIndex(e);h&&-1===n&&(0,w.errLog)("vxe.error.noTree",["revertData"]);var c=o[n];c&&e&&(t?l.default.set(e,t,l.default.clone(l.default.get(c,t),!0)):l.default.destructuring(e,l.default.clone(c,!0)))}})),e?this.$nextTick():this.reloadData(o)},clearData:function(e,t){var r=this.tableFullData,n=this.visibleColumn;return arguments.length?e&&!l.default.isArray(e)&&(e=[e]):e=r,t?e.forEach((function(e){return l.default.set(e,t,null)})):e.forEach((function(e){n.forEach((function(t){t.field&&O(e,t,null)}))})),this.$nextTick()},isInsertByRow:function(e){var t=this.editStore,r=(0,d.getRowid)(this,e);return t.insertList.length&&t.insertMaps[r]},removeInsertRow:function(){return this.remove(this.editStore.insertList)},isUpdateByRow:function(e,t){var r=this.tableFullColumn,n=this.keepSource,l=this.sourceDataRowIdData,o=this.fullDataRowIdData;if(n){var h=(0,d.getRowid)(this,e);if(!o[h])return!1;var c=l[h];if(c){var f=c.row;if(arguments.length>1)return!X(f,e,t);for(var v=0,m=r.length;v<m;v++){var w=r[v].field;if(w&&!X(f,e,w))return!0}}}return!1},getColumns:function(e){var t=this.visibleColumn;return l.default.isUndefined(e)?t.slice(0):t[e]},getColumnById:function(e){var t=this.fullColumnIdData;return t[e]?t[e].column:null},getColumnByField:function(e){var t=this.fullColumnFieldData;return t[e]?t[e].column:null},getTableColumn:function(){return{collectColumn:this.collectColumn.slice(0),fullColumn:this.tableFullColumn.slice(0),visibleColumn:this.visibleColumn.slice(0),tableColumn:this.tableColumn.slice(0)}},getData:function(e){var t=this.data||this.tableSynchData;return l.default.isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords:function(e){var t=this.tableFullData,r=this.afterFullData,n=this.treeConfig,o=this.treeOpts,h=this.checkboxOpts,c=this.tableFullTreeData,d=this.afterTreeFullData,f=this.afterFullRowMaps,v=o.transform,m=o.mapChildrenField,w=h.checkField,x=o.children||o.childrenField,C=e?v?c:t:v?d:r,R=[];if(w)R=n?l.default.filterTree(C,(function(e){return l.default.get(e,w)}),{children:v?m:x}):C.filter((function(e){return l.default.get(e,w)}));else{var y=this.selectCheckboxMaps,T=this.fullDataRowIdData;l.default.each(y,(function(t,r){(e?T[r]:f[r])&&R.push(t)}))}return R},handleVirtualTreeToList:function(){var e=this,t=this.treeOpts,r=this.treeConfig,n=this.treeExpandedMaps,o=this.afterTreeFullData,h=this.afterFullData;if(r&&t.transform){var c=[],f={};return l.default.eachTree(o,(function(t,r,l,path,o){var h=(0,d.getRowid)(e,t),v=(0,d.getRowid)(e,o);(!o||f[v]&&n[v])&&(f[h]=1,c.push(t))}),{children:t.mapChildrenField}),this.afterFullData=c,this.updateScrollYStatus(c),c}return h},updateAfterFullData:function(){var e=this,t=this.tableFullColumn,r=this.tableFullData,n=this.filterOpts,o=this.sortOpts,h=this.treeConfig,d=this.treeOpts,v=this.tableFullTreeData,m=n.remote,w=n.filterMethod,x=o.remote,C=o.sortMethod,R=o.multiple,y=o.chronological,T=d.transform,E=[],S=[],k=[],D=[];if(t.forEach((function(e){var t=e.field,r=e.sortable,n=e.order,l=e.filters;if(!m&&l&&l.length){var o=[],h=[];l.forEach((function(e){e.checked&&(h.push(e),o.push(e.value))})),h.length&&k.push({column:e,valueList:o,itemList:h})}!x&&r&&n&&D.push({column:e,field:t,property:t,order:n,sortTime:e.sortTime})})),R&&y&&D.length>1&&(D=l.default.orderBy(D,"sortTime")),k.length){var I=function(t){return k.every((function(r){var n=r.column,o=r.valueList,h=r.itemList;if(o.length&&!m){var d=n.filterMethod,v=n.filterRender,x=n.field,C=v?c.default.renderer.get(v.name):null,R=C&&C.renderFilter?C.filterMethod:null,y=C?C.defaultFilterMethod:null,T=f.default.getCellValue(t,n);return d?h.some((function(r){return d({value:r.value,option:r,cellValue:T,row:t,column:n,$table:e})})):R?h.some((function(r){return R({value:r.value,option:r,cellValue:T,row:t,column:n,$table:e})})):w?w({options:h,values:o,cellValue:T,row:t,column:n}):y?h.some((function(r){return y({value:r.value,option:r,cellValue:T,row:t,column:n,$table:e})})):o.indexOf(l.default.get(t,x))>-1}return!0}))};h&&T?E=S=l.default.searchTree(v,I,M(M({},d),{},{original:!0})):S=E=h?v.filter(I):r.filter(I)}else h&&T?E=S=l.default.searchTree(v,(function(){return!0}),M(M({},d),{},{original:!0})):S=E=h?v.slice(0):r.slice(0);var O=D[0];if(!x&&O)if(h&&T){if(C){var F=C({data:S,sortList:D,$table:this});S=l.default.isArray(F)?F:S}else S=l.default.orderBy(S,D.map((function(t){var r=t.column,n=t.order;return[re(e,r),n]})));E=S}else{if(C){var $=C({data:E,column:O.column,property:O.field,field:O.field,order:O.order,sortList:D,$table:this});E=l.default.isArray($)?$:E}else{var L;if(R)E=l.default.orderBy(E,D.map((function(t){var r=t.column,n=t.order;return[re(e,r),n]})));else l.default.isArray(O.sortBy)&&(L=O.sortBy.map((function(e){return[e,O.order]}))),E=l.default.orderBy(E,L||[O].map((function(t){var r=t.column,n=t.order;return[re(e,r),n]})))}S=E}this.afterFullData=E,this.afterTreeFullData=S,this.updateAfterDataIndex()},updateAfterDataIndex:function(){var e=this,t=this.treeConfig,r=this.afterFullData,n=this.fullDataRowIdData,o=this.fullAllDataRowIdData,h=this.afterTreeFullData,c=this.treeOpts,f=c.children||c.childrenField,v={};t?l.default.eachTree(h,(function(t,r,l,path){var h=(0,d.getRowid)(e,t),c=o[h],f=path.map((function(e,i){return i%2==0?Number(e)+1:"."})).join("");if(c)c.seq=f,c._index=r;else{var m={row:t,rowid:h,seq:f,index:-1,$index:-1,_index:r,items:[],parent:null,level:0};o[h]=m,n[h]=m}v[h]=t}),{children:c.transform?c.mapChildrenField:f}):r.forEach((function(t,r){var l=(0,d.getRowid)(e,t),h=o[l],c=r+1;if(h)h.seq=c,h._index=r;else{var f={row:t,rowid:l,seq:c,index:-1,$index:-1,_index:r,items:[],parent:null,level:0};o[l]=f,n[l]=f}v[l]=t})),this.afterFullRowMaps=v},getParentRow:function(e){var t,r=this.treeConfig,n=this.fullDataRowIdData;if(e&&r&&(t=l.default.isString(e)?e:(0,d.getRowid)(this,e))){var o=n[t];return o?o.parent:null}return null},getRowById:function(e){var t=this.fullDataRowIdData,r=l.default.eqNull(e)?"":encodeURIComponent(e);return t[r]?t[r].row:null},getRowid:function(e){var t=this.fullAllDataRowMap;return t.has(e)?t.get(e).rowid:null},getTableData:function(){var e=this.treeConfig,t=this.tableFullData,r=this.afterFullData,n=this.tableData,l=this.footerTableData,o=this.tableFullTreeData;return{fullData:e?o.slice(0):t.slice(0),visibleData:r.slice(0),tableData:n.slice(0),footerData:l.slice(0)}},handleLoadDefaults:function(){var e=this;this.checkboxConfig&&this.handleDefaultSelectionChecked(),this.radioConfig&&this.handleDefaultRadioChecked(),this.expandConfig&&this.handleDefaultRowExpand(),this.treeConfig&&this.handleDefaultTreeExpand(),this.mergeCells&&this.handleDefaultMergeCells(),this.mergeFooterItems&&this.handleDefaultMergeFooterItems(),this.$nextTick((function(){return setTimeout(e.recalculate)}))},handleInitDefaults:function(){this.sortConfig&&this.handleDefaultSort()},setColumnFixed:function(e,t){var r=this.isMaxFixedColumn,n=this.columnOpts.maxFixedSize,h=(0,d.handleFieldOrColumn)(this,e),f=(0,d.getRootColumn)(this,h);return f&&f.fixed!==t?!f.fixed&&r?(c.default.modal&&c.default.modal.message({status:"error",content:o.default.i18n("vxe.table.maxFixedCol",[n])}),this.$nextTick()):(l.default.eachTree([f],(function(e){e.fixed=t})),this.saveCustomFixed(),this.refreshColumn()):this.$nextTick()},clearColumnFixed:function(e){var t=(0,d.handleFieldOrColumn)(this,e),r=(0,d.getRootColumn)(this,t);return r&&r.fixed?(l.default.eachTree([r],(function(e){e.fixed=null})),this.saveCustomFixed(),this.refreshColumn()):this.$nextTick()},hideColumn:function(e){var t=(0,d.handleFieldOrColumn)(this,e);return t&&t.visible?(t.visible=!1,this.handleCustom()):this.$nextTick()},showColumn:function(e){var t=(0,d.handleFieldOrColumn)(this,e);return t&&!t.visible?(t.visible=!0,this.handleCustom()):this.$nextTick()},setColumnWidth:function(e,t){var r=(0,d.handleFieldOrColumn)(this,e);if(r){var n=l.default.toInteger(t),o=n;if(v.default.isScale(t)){var h=this.$refs.tableBody,c=h?h.$el:null,f=c?c.clientWidth-1:0;o=Math.floor(n*f)}r.renderWidth=o}return this.$nextTick()},getColumnWidth:function(e){var t=(0,d.handleFieldOrColumn)(this,e);return t?t.renderWidth:0},resetColumn:function(e){var t=this.collectColumn,r=this.customOpts.checkMethod,n=Object.assign({visible:!0,resizable:!0===e,fixed:!0===e},e);return l.default.eachTree(t,(function(e){n.resizable&&(e.resizeWidth=0),n.fixed&&(e.fixed=e.defaultFixed),r&&!r({column:e})||(e.visible=e.defaultVisible)})),n.resizable&&this.saveCustomResizable(!0),n.fixed&&this.saveCustomFixed(),this.handleCustom()},handleCustom:function(){return this.saveCustomVisible(),this.analyColumnWidth(),this.refreshColumn()},restoreCustomStorage:function(){var e=this.id,t=this.collectColumn,r=this.customConfig,n=this.customOpts,o=n.storage,h=!0===n.storage,c=h||o&&o.resizable,d=h||o&&o.visible,f=!0===o||o&&o.fixed,v=!0===o||o&&o.order;if(r&&(c||d||f||v)){var m={};if(!e)return void(0,w.errLog)("vxe.error.reqProp",["id"]);if(c){var x=K(P)[e];x&&l.default.each(x,(function(e,t){m[t]={field:t,resizeWidth:e}}))}if(f){var C=K(j)[e];if(C)C.split(",").forEach((function(e){var t=E(e.split("|"),2),r=t[0],n=t[1];m[r]?m[r].fixed=n:m[r]={field:r,fixed:n}}))}if(v)K("VXE_TABLE_CUSTOM_COLUMN_ORDER")[e];if(d){var R=K(_)[e];if(R){var y=R.split("|"),T=y[0]?y[0].split(","):[],S=y[1]?y[1].split(","):[];T.forEach((function(e){m[e]?m[e].visible=!1:m[e]={field:e,visible:!1}})),S.forEach((function(e){m[e]?m[e].visible=!0:m[e]={field:e,visible:!0}}))}}var k={};l.default.eachTree(t,(function(e){var t=e.getKey();t&&(k[t]=e)})),l.default.each(m,(function(e,t){var r=e.visible,n=e.resizeWidth,o=e.fixed,h=e.order,c=k[t];c&&(l.default.isNumber(n)&&(c.resizeWidth=n),l.default.isBoolean(r)&&(c.visible=r),o&&(c.fixed=o),h&&(c.colSeq=h))}))}},saveCustomFixed:function(){var e=this.id,t=this.collectColumn,r=this.customConfig,n=this.customOpts,o=n.storage,h=!0===n.storage||o&&o.fixed;if(r&&h){var c=K(j),d=[];if(!e)return void(0,w.errLog)("vxe.error.reqProp",["id"]);l.default.eachTree(t,(function(e){if(e.fixed&&e.fixed!==e.defaultFixed){var t=e.getKey();t&&d.push("".concat(t,"|").concat(e.fixed))}})),c[e]=d.join(",")||void 0,localStorage.setItem(j,l.default.toJSONString(c))}},saveCustomVisible:function(){var e=this.id,t=this.collectColumn,r=this.customConfig,n=this.customOpts,o=n.checkMethod,h=n.storage,c=!0===n.storage||h&&h.visible;if(r&&c){var d=K(_),f=[],v=[];if(!e)return void(0,w.errLog)("vxe.error.reqProp",["id"]);l.default.eachTree(t,(function(e){if(!o||o({column:e}))if(!e.visible&&e.defaultVisible){var t=e.getKey();t&&f.push(t)}else if(e.visible&&!e.defaultVisible){var r=e.getKey();r&&v.push(r)}})),d[e]=[f.join(",")].concat(v.length?[v.join(",")]:[]).join("|")||void 0,localStorage.setItem(_,l.default.toJSONString(d))}},saveCustomResizable:function(e){var t=this.id,r=this.collectColumn,n=this.customConfig,o=this.customOpts,h=o.storage,c=!0===o.storage||h&&h.resizable;if(n&&c){var d,f=K(P);if(!t)return void(0,w.errLog)("vxe.error.reqProp",["id"]);e||(d=l.default.isPlainObject(f[t])?f[t]:{},l.default.eachTree(r,(function(e){if(e.resizeWidth){var t=e.getKey();t&&(d[t]=e.renderWidth)}}))),f[t]=l.default.isEmpty(d)?void 0:d,localStorage.setItem(P,l.default.toJSONString(f))}},handleUpdateDataQueue:function(){this.upDataFlag++},handleRefreshColumnQueue:function(){this.reColumnFlag++},refreshColumn:function(){var e=this;return this.parseColumns().then((function(){return e.refreshScroll()})).then((function(){return e.recalculate()}))},parseColumns:function(){var e=this,t=[],r=[],n=[],o=this.collectColumn,h=this.tableFullColumn,c=this.isGroup,d=this.columnStore,f=this.sXOpts,v=this.scrollXStore;if(c){var m=[],x=[],C=[];l.default.eachTree(o,(function(e,o,h,path,c){var d=F(e);c&&c.fixed&&(e.fixed=c.fixed),c&&e.fixed!==c.fixed&&(0,w.errLog)("vxe.error.groupFixed"),d?e.visible=!!l.default.findTree(e.children,(function(e){return F(e)?null:e.visible})):e.visible&&("left"===e.fixed?t.push(e):"right"===e.fixed?n.push(e):r.push(e))})),o.forEach((function(e){e.visible&&("left"===e.fixed?m.push(e):"right"===e.fixed?C.push(e):x.push(e))})),this.tableGroupColumn=m.concat(x).concat(C)}else h.forEach((function(e){e.visible&&("left"===e.fixed?t.push(e):"right"===e.fixed?n.push(e):r.push(e))}));var R=t.concat(r).concat(n),y=f.enabled&&f.gt>-1&&(0===f.gt||f.gt<=h.length);if(this.hasFixedColumn=t.length>0||n.length>0,Object.assign(d,{leftList:t,centerList:r,rightList:n}),y){0;var T=Z(this).visibleSize;v.startIndex=0,v.endIndex=T,v.visibleSize=T}return R.length===this.visibleColumn.length&&this.visibleColumn.every((function(e,t){return e===R[t]}))||(this.clearMergeCells(),this.clearMergeFooterItems()),this.scrollXLoad=y,this.visibleColumn=R,this.handleTableColumn(),this.updateFooter().then((function(){return e.recalculate()})).then((function(){return e.updateCellAreas(),e.recalculate()}))},analyColumnWidth:function(){var e=this.columnOpts,t=e.width,r=e.minWidth,n=[],l=[],o=[],h=[],c=[],d=[];this.tableFullColumn.forEach((function(e){t&&!e.width&&(e.width=t),r&&!e.minWidth&&(e.minWidth=r),e.visible&&(e.resizeWidth?n.push(e):v.default.isPx(e.width)?l.push(e):v.default.isScale(e.width)?h.push(e):v.default.isPx(e.minWidth)?o.push(e):v.default.isScale(e.minWidth)?c.push(e):d.push(e))})),Object.assign(this.columnStore,{resizeList:n,pxList:l,pxMinList:o,scaleList:h,scaleMinList:c,autoList:d})},refreshScroll:function(){var e=this,t=this.lastScrollLeft,r=this.lastScrollTop,n=this.$refs,l=n.tableBody,o=n.leftBody,h=n.rightBody,c=n.tableFooter,f=l?l.$el:null,m=o?o.$el:null,w=h?h.$el:null,x=c?c.$el:null;return new Promise((function(n){if(t||r)return(0,d.restoreScrollLocation)(e,t,r).then((function(){setTimeout(n,30)}));(0,v.setScrollTop)(f,r),(0,v.setScrollTop)(m,r),(0,v.setScrollTop)(w,r),(0,v.setScrollLeft)(x,t),setTimeout(n,30)}))},recalculate:function(e){var t=this,r=this.$refs,n=r.tableBody,l=r.tableHeader,o=r.tableFooter,h=n?n.$el:null,c=l?l.$el:null,d=o?o.$el:null;return h&&(this.autoCellWidth(c,h,d),!0===e)?this.computeScrollLoad().then((function(){return t.autoCellWidth(c,h,d),t.computeScrollLoad()})):this.computeScrollLoad()},autoCellWidth:function(e,t,r){var n=0,l=t.clientWidth-1,o=l,h=o/100,c=this.fit,d=this.columnStore,f=d.resizeList,v=d.pxMinList,m=d.pxList,w=d.scaleList,x=d.scaleMinList,C=d.autoList;if(v.forEach((function(e){var t=parseInt(e.minWidth);n+=t,e.renderWidth=t})),x.forEach((function(e){var t=Math.floor(parseInt(e.minWidth)*h);n+=t,e.renderWidth=t})),w.forEach((function(e){var t=Math.floor(parseInt(e.width)*h);n+=t,e.renderWidth=t})),m.forEach((function(e){var t=parseInt(e.width);n+=t,e.renderWidth=t})),f.forEach((function(e){var t=parseInt(e.resizeWidth);n+=t,e.renderWidth=t})),h=(o-=n)>0?Math.floor(o/(x.length+v.length+C.length)):0,c?o>0&&x.concat(v).forEach((function(e){n+=h,e.renderWidth+=h})):h=40,C.forEach((function(e){var t=Math.max(h,40);e.renderWidth=t,n+=t})),c){var R=w.concat(x).concat(v).concat(C),y=R.length-1;if(y>0){var T=l-n;if(T>0){for(;T>0&&y>=0;)T--,R[y--].renderWidth++;n=l}}}var E=t.offsetHeight,S=t.scrollHeight>t.clientHeight;if(this.scrollbarWidth=S?t.offsetWidth-t.clientWidth:0,this.overflowY=S,this.tableWidth=n,this.tableHeight=E,e?(this.headerHeight=e.clientHeight,this.$nextTick((function(){e&&t&&e.scrollLeft!==t.scrollLeft&&(e.scrollLeft=t.scrollLeft)}))):this.headerHeight=0,r){var k=r.offsetHeight;this.scrollbarHeight=Math.max(k-r.clientHeight,0),this.overflowX=n>r.clientWidth,this.footerHeight=k}else this.footerHeight=0,this.scrollbarHeight=Math.max(E-t.clientHeight,0),this.overflowX=n>l;this.updateHeight(),this.parentHeight=Math.max(this.headerHeight+this.footerHeight+20,this.getParentHeight()),this.overflowX&&this.checkScrolling()},updateHeight:function(){this.customHeight=L(this,"height"),this.customMinHeight=L(this,"minHeight"),this.customMaxHeight=L(this,"maxHeight")},updateStyle:function(){var e=this,t=this.$refs,r=this.isGroup,n=this.fullColumnIdData,o=this.tableColumn,h=this.customHeight,c=this.customMinHeight,d=this.customMaxHeight,f=this.border,m=this.headerHeight,w=this.showFooter,x=this.showOverflow,C=this.showHeaderOverflow,R=this.showFooterOverflow,y=this.footerHeight,T=this.tableHeight,E=this.tableWidth,S=this.scrollbarHeight,k=this.scrollbarWidth,D=this.scrollXLoad,M=this.scrollYLoad,I=this.cellOffsetWidth,O=this.columnStore,F=this.elemStore,$=this.editStore,L=this.currentRow,A=this.mouseConfig,z=this.keyboardConfig,V=this.keyboardOpts,H=this.spanMethod,W=this.mergeList,N=this.mergeFooterList,P=this.footerSpanMethod,_=this.isAllOverflow,j=this.visibleColumn,Y=t.emptyPlaceholder,X=F["main-body-wrapper"];return Y&&(Y.style.top="".concat(m,"px"),Y.style.height=X?"".concat(X.offsetHeight-S,"px"):""),h>0&&w&&(h+=S),["main","left","right"].forEach((function($,L){var A=L>0?$:"",Y=O["".concat(A,"List")],X=t["".concat(A,"Container")];["header","body","footer"].forEach((function(t){var L=F["".concat($,"-").concat(t,"-wrapper")],U=F["".concat($,"-").concat(t,"-table")];if("header"===t){var K,G=o;r?G=j:A&&(D||C)&&(G=Y),K=G.reduce((function(e,t){return e+t.renderWidth}),0),U&&(U.style.width=K?"".concat(K+k,"px"):"",v.browse.msie&&l.default.arrayEach(U.querySelectorAll(".vxe-resizable"),(function(e){e.style.height="".concat(e.parentNode.offsetHeight,"px")})));var J=F["".concat($,"-").concat(t,"-repair")];J&&(J.style.width="".concat(E,"px"));var Z=F["".concat($,"-").concat(t,"-list")];r&&Z&&l.default.arrayEach(Z.querySelectorAll(".col--group"),(function(t){var r=e.getColumnNode(t);if(r){var n=r.item,o=n.showHeaderOverflow,h=l.default.isBoolean(o)?o:C,c="title"===h||(!0===h||"tooltip"===h)||"ellipsis"===h,d=0,v=0;c&&l.default.eachTree(n.children,(function(e){e.children&&n.children.length||v++,d+=e.renderWidth})),t.style.width=c?"".concat(d-v-(f?2:0),"px"):""}}))}else if("body"===t){var Q=F["".concat($,"-").concat(t,"-emptyBlock")];if(B(L)){var ee=0,te=c-m-y;if(d&&(ee=d-m-y,A&&(ee-=w?0:S),ee=Math.max(te,ee),L.style.maxHeight="".concat(ee,"px")),h){var ie=h-m-y;A&&(ie-=w?0:S),ee&&(ie=Math.min(ee,ie)),L.style.height="".concat(Math.max(te,ie),"px")}else L.style.height="";L.style.minHeight="".concat(te,"px")}if(X){var re="right"===A,ne=O["".concat(A,"List")];B(L)&&(L.style.top="".concat(m,"px")),X.style.height="".concat((h>0?h-m-y:T)+m+y-S*(w?2:1),"px"),X.style.width="".concat(ne.reduce((function(e,t){return e+t.renderWidth}),re?k:0),"px")}var le,oe=o;A&&(oe=!e.expandColumn&&(D||M||(x?_:x))?W.length||H||z&&V.isMerge?j:Y:j),le=oe.reduce((function(e,t){return e+t.renderWidth}),0),U&&(U.style.width=le?"".concat(le,"px"):"",U.style.paddingRight=k&&A&&(v.browse["-moz"]||v.browse.safari)?"".concat(k,"px"):""),Q&&(Q.style.width=le?"".concat(le,"px"):"")}else if("footer"===t){var ae,se=o;A&&(se=e.expandColumn||!D&&!R||N.length&&P?j:Y),ae=se.reduce((function(e,t){return e+t.renderWidth}),0),B(L)&&(X&&(L.style.top="".concat(h>0?h-y:T+m,"px")),L.style.marginTop="".concat(-S,"px")),U&&(U.style.width=ae?"".concat(ae+k,"px"):"")}var he=F["".concat($,"-").concat(t,"-colgroup")];he&&l.default.arrayEach(he.children,(function(r){var o=r.getAttribute("name");if("col_gutter"===o&&(r.style.width="".concat(k,"px")),n[o]){var h,c=n[o].column,d=c.showHeaderOverflow,f=c.showFooterOverflow,v=c.showOverflow;r.style.width="".concat(c.renderWidth,"px");var m="title"===(h="header"===t?l.default.isUndefined(d)||l.default.isNull(d)?C:d:"footer"===t?l.default.isUndefined(f)||l.default.isNull(f)?R:f:l.default.isUndefined(v)||l.default.isNull(v)?x:v)||(!0===h||"tooltip"===h)||"ellipsis"===h,w=F["".concat($,"-").concat(t,"-list")];"header"===t||"footer"===t?D&&!m&&(m=!0):!D&&!M||m||(m=!0),w&&l.default.arrayEach(w.querySelectorAll(".".concat(c.id)),(function(t){var r=parseInt(t.getAttribute("colspan")||1),n=t.querySelector(".vxe-cell"),l=c.renderWidth;if(n){if(r>1)for(var o=e.getColumnIndex(c),h=1;h<r;h++){var d=e.getColumns(o+h);d&&(l+=d.renderWidth)}n.style.width=m?"".concat(l-I*r,"px"):""}}))}}))}))})),L&&this.setCurrentRow(L),A&&A.selected&&$.selected.row&&$.selected.column&&this.addColSdCls(),this.$nextTick()},checkScrolling:function(){var e=this.$refs,t=e.tableBody,r=e.leftContainer,n=e.rightContainer,l=t?t.$el:null;l&&(r&&v.default[l.scrollLeft>0?"addClass":"removeClass"](r,"scrolling--middle"),n&&v.default[l.clientWidth<l.scrollWidth-Math.ceil(l.scrollLeft)?"addClass":"removeClass"](n,"scrolling--middle"))},preventEvent:function(e,t,r,n,l){var o,h=this;return c.default.interceptor.get(t).some((function(t){return!1===t(Object.assign({$grid:h.$xegrid,$table:h,$event:e},r))}))||n&&(o=n()),l&&l(),o},handleGlobalMousedownEvent:function(e){var t=this,r=this.$el,n=this.$refs,l=this.$xegrid,o=this.$toolbar,h=this.mouseConfig,c=this.editStore,d=this.ctxMenuStore,f=this.editRules,v=this.editOpts,m=this.validOpts,w=this.filterStore,x=this.getRowNode,C=c.actived,R=n.ctxWrapper,y=n.filterWrapper,T=n.validTip;if(y&&(H(e,r,"vxe-cell--filter").flag||H(e,y.$el).flag||H(e,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(e,"event.clearFilter",w.args,this.closeFilter)),C.row){if(!1!==v.autoClear){var E=C.args.cell;E&&H(e,E).flag||T&&H(e,T.$el).flag||(!this.lastCallTime||this.lastCallTime+50<Date.now())&&(H(e,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(e,"event.clearActived",C.args,(function(){var n;if("row"===v.mode){var l=H(e,r,"vxe-body--row");n=!!l.flag&&x(l.targetElem).item!==C.args.row}else n=!H(e,r,"col--edit").flag;if(n||(n=H(e,r,"vxe-header--row").flag),n||(n=H(e,r,"vxe-footer--row").flag),!n&&t.height&&!t.overflowY){var o=e.target;A(o,"vxe-table--body-wrapper")&&(n=e.offsetY<o.clientHeight)}!n&&H(e,r).flag||setTimeout((function(){return t.clearEdit(e)}))})))}}else h&&(H(e,r).flag||l&&H(e,l.$el).flag||R&&H(e,R.$el).flag||o&&H(e,o.$el).flag||(this.clearSelected(),H(e,document.body,"vxe-table--ignore-areas-clear").flag||this.preventEvent(e,"event.clearAreas",{},(function(){t.clearCellAreas(),t.clearCopyCellArea()}))));d.visible&&R&&!H(e,R.$el).flag&&this.closeMenu();var S=H(e,(l||this).$el).flag;!S&&f&&m.autoClear&&(this.validErrorMaps={}),this.isActivated=S},handleGlobalBlurEvent:function(){this.closeFilter(),this.closeMenu()},handleGlobalMousewheelEvent:function(){this.closeTooltip(),this.closeMenu()},keydownEvent:function(e){var t=this,r=this.filterStore,n=this.ctxMenuStore,l=this.editStore,o=this.keyboardConfig,h=this.mouseConfig,c=this.mouseOpts,d=this.keyboardOpts,f=l.actived;27===e.keyCode&&this.preventEvent(e,"event.keydown",null,(function(){if(t.emitEvent("keydown-start",{},e),o&&h&&c.area&&t.handleKeyboardEvent)t.handleKeyboardEvent(e);else if((f.row||r.visible||n.visible)&&(e.stopPropagation(),t.closeFilter(),t.closeMenu(),o&&d.isEsc&&f.row)){var l=f.args;t.clearEdit(e),h&&c.selected&&t.$nextTick((function(){return t.handleSelected(l,e)}))}t.emitEvent("keydown",{},e),t.emitEvent("keydown-end",{},e)}))},handleGlobalKeydownEvent:function(e){var t=this;this.isActivated&&this.preventEvent(e,"event.keydown",null,(function(){var r,n=t.filterStore,o=t.isCtxMenu,h=t.ctxMenuStore,c=t.editStore,d=t.editOpts,v=t.editConfig,m=t.mouseConfig,w=t.mouseOpts,x=t.keyboardConfig,C=t.keyboardOpts,R=t.treeConfig,y=t.treeOpts,T=t.highlightCurrentRow,E=t.currentRow,S=t.bodyCtxMenu,k=t.rowOpts,D=c.selected,I=c.actived,$=e.keyCode,L=8===$,A=9===$,z=13===$,V=27===$,H=32===$,B=37===$,W=38===$,N=39===$,P=40===$,_=46===$,j=113===$,Y=93===$,X=e.metaKey,U=e.ctrlKey,K=e.shiftKey,G=e.altKey,J=B||W||N||P,Z=o&&h.visible&&(z||H||J),Q=(0,f.isEnableConf)(v)&&I.column&&I.row,ee=y.children||y.childrenField;if(n.visible)V&&t.closeFilter();else{if(Z)e.preventDefault(),h.showChild&&F(h.selected)?t.moveCtxMenu(e,$,h,"selectChild",37,!1,h.selected.children):t.moveCtxMenu(e,$,h,"selected",39,!0,t.ctxMenuList);else if(x&&m&&w.area&&t.handleKeyboardEvent)t.handleKeyboardEvent(e);else if(x&&H&&C.isChecked&&D.row&&D.column&&("checkbox"===D.column.type||"radio"===D.column.type))e.preventDefault(),"checkbox"===D.column.type?t.handleToggleCheckRowEvent(e,D.args):t.triggerRadioRowEvent(e,D.args);else if(j&&(0,f.isEnableConf)(v))Q||D.row&&D.column&&(e.stopPropagation(),e.preventDefault(),t.handleActived(D.args,e));else if(Y)t._keyCtx=D.row&&D.column&&S.length,clearTimeout(t.keyCtxTimeout),t.keyCtxTimeout=setTimeout((function(){t._keyCtx=!1}),1e3);else if(z&&!G&&x&&C.isEnter&&(D.row||I.row||R&&(k.isCurrent||T)&&E)){if(U)I.row&&(r=I.args,t.clearEdit(e),m&&w.selected&&t.$nextTick((function(){return t.handleSelected(r,e)})));else if(D.row||I.row){var te=D.row?D.args:I.args;K?C.enterToTab?t.moveTabSelected(te,K,e):t.moveSelected(te,B,!0,N,!1,e):C.enterToTab?t.moveTabSelected(te,K,e):t.moveSelected(te,B,!1,N,!0,e)}else if(R&&(k.isCurrent||T)&&E){var ie=E[ee];if(ie&&ie.length){e.preventDefault();var re=ie[0];r={$table:t,row:re},t.setTreeExpand(E,!0).then((function(){return t.scrollToRow(re)})).then((function(){return t.triggerCurrentRowEvent(e,r)}))}}}else if(J&&x&&C.isArrow)Q||(D.row&&D.column?t.moveSelected(D.args,B,W,N,P,e):(W||P)&&(k.isCurrent||T)&&t.moveCurrentRow(W,P,e));else if(A&&x&&C.isTab)D.row||D.column?t.moveTabSelected(D.args,K,e):(I.row||I.column)&&t.moveTabSelected(I.args,K,e);else if(x&&(_||(R&&(k.isCurrent||T)&&E?L&&C.isArrow:L))){if(!Q){var ne=C.delMethod,le=C.backMethod;if(C.isDel&&(D.row||D.column))ne?ne({row:D.row,rowIndex:t.getRowIndex(D.row),column:D.column,columnIndex:t.getColumnIndex(D.column),$table:t}):O(D.row,D.column,null),L?le?le({row:D.row,rowIndex:t.getRowIndex(D.row),column:D.column,columnIndex:t.getColumnIndex(D.column),$table:t}):t.handleActived(D.args,e):_&&t.updateFooter();else if(L&&C.isArrow&&R&&(k.isCurrent||T)&&E){var oe=l.default.findTree(t.afterFullData,(function(e){return e===E}),{children:ee}).parent;oe&&(e.preventDefault(),r={$table:t,row:oe},t.setTreeExpand(oe,!1).then((function(){return t.scrollToRow(oe)})).then((function(){return t.triggerCurrentRowEvent(e,r)})))}}}else if(x&&C.isEdit&&!U&&!X&&(H||$>=48&&$<=57||$>=65&&$<=90||$>=96&&$<=111||$>=186&&$<=192||$>=219&&$<=222)){var ae=C.editMethod;if(D.column&&D.row&&(0,f.isEnableConf)(D.column.editRender)){var se=d.beforeEditMethod||d.activeMethod;se&&!se(M(M({},D.args),{},{$table:t,$grid:t.$xegrid}))||(ae?ae({row:D.row,rowIndex:t.getRowIndex(D.row),column:D.column,columnIndex:t.getColumnIndex(D.column),$table:t,$grid:t.$xegrid}):(O(D.row,D.column,null),t.handleActived(D.args,e)))}}t.emitEvent("keydown",{},e)}}))},handleGlobalPasteEvent:function(e){var t=this.isActivated,r=this.keyboardConfig,n=this.keyboardOpts,l=this.mouseConfig,o=this.mouseOpts,h=this.editStore,c=this.filterStore,d=h.actived;t&&!c.visible&&(d.row||d.column||r&&n.isClip&&l&&o.area&&this.handlePasteCellAreaEvent&&this.handlePasteCellAreaEvent(e),this.emitEvent("paste",{},e))},handleGlobalCopyEvent:function(e){var t=this.isActivated,r=this.keyboardConfig,n=this.keyboardOpts,l=this.mouseConfig,o=this.mouseOpts,h=this.editStore,c=this.filterStore,d=h.actived;t&&!c.visible&&(d.row||d.column||r&&n.isClip&&l&&o.area&&this.handleCopyCellAreaEvent&&this.handleCopyCellAreaEvent(e),this.emitEvent("copy",{},e))},handleGlobalCutEvent:function(e){var t=this.isActivated,r=this.keyboardConfig,n=this.keyboardOpts,l=this.mouseConfig,o=this.mouseOpts,h=this.editStore,c=this.filterStore,d=h.actived;t&&!c.visible&&(d.row||d.column||r&&n.isClip&&l&&o.area&&this.handleCutCellAreaEvent&&this.handleCutCellAreaEvent(e),this.emitEvent("cut",{},e))},handleGlobalResizeEvent:function(){this.closeMenu(),this.updateCellAreas(),this.recalculate(!0)},handleTargetEnterEvent:function(e){var t=this.$refs.tooltip;clearTimeout(this.tooltipTimeout),e?this.closeTooltip():t&&t.setActived(!0)},handleTargetLeaveEvent:function(){var e=this,t=this.tooltipOpts,r=this.$refs.tooltip;r&&r.setActived(!1),t.enterable?this.tooltipTimeout=setTimeout((function(){(r=e.$refs.tooltip)&&!r.isActived()&&e.closeTooltip()}),t.leaveDelay):this.closeTooltip()},triggerHeaderHelpEvent:function(e,t){var r=t.column,n=r.titlePrefix||r.titleHelp;if(n.content||n.message){var l=this.$refs,o=this.tooltipStore,content=(0,f.getFuncText)(n.content||n.message);this.handleTargetEnterEvent(!0),o.visible=!0,o.currOpts=M(M({},n),{},{content:null}),this.$nextTick((function(){var t=l.tooltip;t&&t.open(e.currentTarget,content)}))}},triggerHeaderTooltipEvent:function(e,t){var r=this.tooltipStore,n=t.column,l=e.currentTarget;this.handleTargetEnterEvent(r.column!==n||r.row),r.column===n&&r.visible||this.handleTooltip(e,l,l,null,t)},triggerBodyTooltipEvent:function(e,t){var r,n,l=this.editConfig,o=this.editOpts,h=this.editStore,c=this.tooltipStore,d=h.actived,v=t.row,m=t.column,w=e.currentTarget;if(this.handleTargetEnterEvent(c.column!==m||c.row!==v),m.editRender&&(0,f.isEnableConf)(l)){if("row"===o.mode&&d.row===v)return;if(d.row===v&&d.column===m)return}c.column===m&&c.row===v&&c.visible||(m.treeNode?(r=w.querySelector(".vxe-tree-cell"),"html"===m.type&&(n=w.querySelector(".vxe-cell--html"))):n=w.querySelector("html"===m.type?".vxe-cell--html":".vxe-cell--label"),this.handleTooltip(e,w,r||w.children[0],n,t))},triggerFooterTooltipEvent:function(e,t){var r=t.column,n=this.tooltipStore,l=e.currentTarget;this.handleTargetEnterEvent(!0),n.column===r&&n.visible||this.handleTooltip(e,l,l.querySelector(".vxe-cell--item")||l.children[0],null,t)},handleTooltip:function(e,t,r,n,o){o.cell=t;var h=this.$refs,c=this.tooltipOpts,d=this.tooltipStore,v=o.column,m=o.row,w=c.showAll,x=c.enabled,C=c.contentMethod,R=C?C(o):null,y=C&&!l.default.eqNull(R),content=y?R:("html"===v.type?r.innerText:r.textContent).trim(),T=r.scrollWidth>r.clientWidth;return content&&(w||x||y||T)&&(Object.assign(d,{row:m,column:v,visible:!0,currOpts:null}),this.$nextTick((function(){var e=h.tooltip;e&&e.open(T?r:n||r,f.default.formatText(content))}))),this.$nextTick()},openTooltip:function(e,content){var t=this.$refs.commTip;return t?t.open(e,content):this.$nextTick()},closeTooltip:function(){var e=this.$refs,t=this.tooltipStore,r=e.tooltip,n=e.commTip;return t.visible&&(Object.assign(t,{row:null,column:null,content:null,visible:!1,currOpts:null}),r&&r.close()),n&&n.close(),this.$nextTick()},isAllCheckboxChecked:function(){return this.isAllSelected},isAllCheckboxIndeterminate:function(){return!this.isAllSelected&&this.isIndeterminate},isCheckboxIndeterminate:function(){return(0,w.warnLog)("vxe.error.delFunc",["isCheckboxIndeterminate","isAllCheckboxIndeterminate"]),this.isAllCheckboxIndeterminate()},getCheckboxIndeterminateRecords:function(e){var t=this.treeConfig,r=this.treeIndeterminateMaps,n=this.fullDataRowIdData;if(t){var o=[],h=[];return l.default.each(r,(function(e,t){e&&(o.push(e),n[t]&&h.push(e))})),e?o:h}return[]},handleDefaultSelectionChecked:function(){var e=this.fullDataRowIdData,t=this.checkboxOpts,r=t.checkAll,n=t.checkRowKeys;if(r)this.handleCheckedAllCheckboxRow(!0,!0);else if(n){var l=[];n.forEach((function(t){e[t]&&l.push(e[t].row)})),this.handleCheckedCheckboxRow(l,!0,!0)}},handleCheckedCheckboxRow:function(e,t,r){var n=this;return e&&!l.default.isArray(e)&&(e=[e]),e.forEach((function(e){return n.handleSelectRow({row:e},!!t,r)})),this.$nextTick()},setCheckboxRow:function(e,t){return this.handleCheckedCheckboxRow(e,t,!0)},isCheckedByCheckboxRow:function(e){var t=this.selectCheckboxMaps,r=this.checkboxOpts.checkField;return r?l.default.get(e,r):!!t[(0,d.getRowid)(this,e)]},isIndeterminateByCheckboxRow:function(e){return!!this.treeIndeterminateMaps[(0,d.getRowid)(this,e)]&&!this.isCheckedByCheckboxRow(e)},handleSelectRow:function(e,t,r){var n=this,o=e.row,h=this.selectCheckboxMaps,c=this.afterFullData,f=this.treeConfig,v=this.treeOpts,m=this.treeIndeterminateMaps,w=this.checkboxOpts,x=w.checkField,C=w.checkStrictly,R=w.checkMethod,y=M({},h),T=v.children||v.childrenField,E=w.indeterminateField||w.halfField,S=(0,d.getRowid)(this,o);if(x)if(f&&!C){-1===t?(m[S]||(E&&l.default.set(o,E,!0),m[S]=o),l.default.set(o,x,!1)):l.default.eachTree([o],(function(e){(n.eqRow(e,o)||r||!R||R({row:e}))&&(l.default.set(e,x,t),E&&l.default.set(o,E,!1),delete m[(0,d.getRowid)(n,e)],n.handleCheckboxReserveRow(o,t))}),{children:T});var k=l.default.findTree(c,(function(e){return n.eqRow(e,o)}),{children:T});if(k&&k.parent){var D,I=[],O={};if(!r&&R?k.items.forEach((function(e){if(R({row:e})){var t=(0,d.getRowid)(n,e);O[t]=e,I.push(e)}})):k.items.forEach((function(e){var t=(0,d.getRowid)(n,e);O[t]=e,I.push(e)})),l.default.find(k.items,(function(e){return!!m[(0,d.getRowid)(n,e)]})))D=-1;else{var F=[];k.items.forEach((function(e){l.default.get(e,x)&&F.push(e)})),D=F.filter((function(e){return O[(0,d.getRowid)(n,e)]})).length===I.length||!(!F.length&&-1!==t)&&-1}return this.selectCheckboxMaps=y,this.handleSelectRow({row:k.parent},D,r)}}else(r||!R||R({row:o}))&&(l.default.set(o,x,t),this.handleCheckboxReserveRow(o,t));else if(f&&!C){-1===t?(m[S]||(E&&l.default.set(o,E,!0),m[S]=o),y[S]&&delete y[S]):l.default.eachTree([o],(function(e){var h=(0,d.getRowid)(n,e);(n.eqRow(e,o)||r||!R||R({row:e}))&&(t?y[h]=e:y[h]&&delete y[h],E&&l.default.set(o,E,!1),delete m[(0,d.getRowid)(n,e)],n.handleCheckboxReserveRow(o,t))}),{children:T});var $=l.default.findTree(c,(function(e){return n.eqRow(e,o)}),{children:T});if($&&$.parent){var L,A=[],z={};if(!r&&R?$.items.forEach((function(e){if(R({row:e})){var t=(0,d.getRowid)(n,e);z[t]=e,A.push(e)}})):$.items.forEach((function(e){var t=(0,d.getRowid)(n,e);z[t]=e,A.push(e)})),l.default.find($.items,(function(e){return!!m[(0,d.getRowid)(n,e)]})))L=-1;else{var V=[];$.items.forEach((function(e){var t=(0,d.getRowid)(n,e);y[t]&&V.push(e)})),L=V.filter((function(e){return z[(0,d.getRowid)(n,e)]})).length===A.length||!(!V.length&&-1!==t)&&-1}return this.selectCheckboxMaps=y,this.handleSelectRow({row:$.parent},L,r)}}else(r||!R||R({row:o}))&&(t?y[S]||(y[S]=o):y[S]&&delete y[S],this.handleCheckboxReserveRow(o,t));this.selectCheckboxMaps=y,this.checkSelectionStatus()},handleToggleCheckRowEvent:function(e,t){var r=this.selectCheckboxMaps,n=this.checkboxOpts.checkField,o=t.row,h=!1;h=n?!l.default.get(o,n):!r[(0,d.getRowid)(this,o)],e?this.triggerCheckRowEvent(e,t,h):this.handleSelectRow(t,h)},triggerCheckRowEvent:function(e,t,r){var n=this.checkboxOpts,l=this.afterFullData,o=n.checkMethod,h=t.row;if(n.isShiftKey&&e.shiftKey&&!this.treeConfig){var c=this.getCheckboxRecords();if(c.length){var d=c[0],f=this.getVTRowIndex(h),v=this.getVTRowIndex(d);if(f!==v){this.setAllCheckboxRow(!1);var m=f<v?l.slice(f,v+1):l.slice(v,f+1);return this.handleCheckedCheckboxRow(m,!0,!1),void this.emitEvent("checkbox-range-select",Object.assign({rangeRecords:m},t),e)}}}o&&!o({row:h})||(this.handleSelectRow(t,r),this.emitEvent("checkbox-change",Object.assign({records:this.getCheckboxRecords(),reserves:this.getCheckboxReserveRecords(),indeterminates:this.getCheckboxIndeterminateRecords(),checked:r},t),e))},toggleCheckboxRow:function(e){var t=this.selectCheckboxMaps,r=this.checkboxOpts.checkField,n=r?!l.default.get(e,r):!t[(0,d.getRowid)(this,e)];return this.handleSelectRow({row:e},n,!0),this.$nextTick()},handleCheckedAllCheckboxRow:function(e,t){var r=this,n=this.afterFullData,o=this.treeConfig,h=this.treeOpts,c=this.selectCheckboxMaps,f=this.checkboxReserveRowMap,v=this.checkboxOpts,m=this.afterFullRowMaps,w=v.checkField,x=v.reserve,C=v.checkStrictly,R=v.checkMethod,y=v.indeterminateField||v.halfField,T=h.children||h.childrenField,E={};if(o||l.default.each(c,(function(e,t){m[t]||(E[t]=e)})),C)this.isAllSelected=e;else{if(w){var S=function(n){(t||!R||R({row:n}))&&(e&&(E[(0,d.getRowid)(r,n)]=n),l.default.set(n,w,e)),o&&y&&l.default.set(n,y,!1)};o?l.default.eachTree(n,S,{children:T}):n.forEach(S)}else o?e?l.default.eachTree(n,(function(e){(t||!R||R({row:e}))&&(E[(0,d.getRowid)(r,e)]=e)}),{children:T}):!t&&R&&l.default.eachTree(n,(function(e){var t=(0,d.getRowid)(r,e);!R({row:e})&&c[t]&&(E[t]=e)}),{children:T}):e?!t&&R?n.forEach((function(e){var t=(0,d.getRowid)(r,e);(c[t]||R({row:e}))&&(E[t]=e)})):n.forEach((function(e){E[(0,d.getRowid)(r,e)]=e})):!t&&R&&n.forEach((function(e){var t=(0,d.getRowid)(r,e);!R({row:e})&&c[t]&&(E[t]=e)}));x&&(e?l.default.each(E,(function(e,t){f[t]=e})):n.forEach((function(e){return r.handleCheckboxReserveRow(e,!1)}))),this.selectCheckboxMaps=w?{}:E}return this.treeIndeterminateMaps={},this.treeIndeterminateRowMaps={},this.checkSelectionStatus(),this.$nextTick()},setAllCheckboxRow:function(e){return this.handleCheckedAllCheckboxRow(e,!0)},checkSelectionStatus:function(){var e=this,t=this.afterFullData,r=this.selectCheckboxMaps,n=this.treeIndeterminateMaps,o=this.checkboxOpts,h=this.treeConfig,c=o.checkField,f=o.checkStrictly,v=o.checkMethod,m=o.indeterminateField||o.halfField;if(!f){var w=[],x=[],C=!1,R=!1;c?(C=t.every(v?function(e){return v({row:e})?!!l.default.get(e,c)&&(x.push(e),!0):(w.push(e),!0)}:function(e){return l.default.get(e,c)})&&t.length!==w.length,R=h?m?!C&&t.some((function(t){return l.default.get(t,c)||l.default.get(t,m)||!!n[(0,d.getRowid)(e,t)]})):!C&&t.some((function(t){return l.default.get(t,c)||!!n[(0,d.getRowid)(e,t)]})):m?!C&&t.some((function(e){return l.default.get(e,c)||l.default.get(e,m)})):!C&&t.some((function(e){return l.default.get(e,c)}))):(C=t.every(v?function(t){return v({row:t})?!!r[(0,d.getRowid)(e,t)]&&(x.push(t),!0):(w.push(t),!0)}:function(t){return r[(0,d.getRowid)(e,t)]})&&t.length!==w.length,R=h?!C&&t.some((function(t){var l=(0,d.getRowid)(e,t);return n[l]||r[l]})):!C&&t.some((function(t){return r[(0,d.getRowid)(e,t)]}))),this.isAllSelected=C,this.isIndeterminate=R}},handleReserveStatus:function(){var e=this.expandColumn,t=this.treeOpts,r=this.treeConfig,n=this.fullDataRowIdData,l=this.fullAllDataRowMap,o=this.currentRow,h=this.selectRadioRow,c=this.radioReserveRow,f=this.radioOpts,v=this.checkboxOpts,m=this.selectCheckboxMaps,w=this.rowExpandedMaps,x=this.treeExpandedMaps,C=this.expandOpts;if(h&&!l.has(h)&&(this.selectRadioRow=null),f.reserve&&c){var R=(0,d.getRowid)(this,c);n[R]&&this.handleCheckedRadioRow(n[R].row,!0)}this.selectCheckboxMaps=G(this,m),v.reserve&&this.handleCheckedCheckboxRow(J(this,this.checkboxReserveRowMap),!0,!0),o&&!l.has(o)&&(this.currentRow=null),this.rowExpandedMaps=e?G(this,w):[],e&&C.reserve&&this.setRowExpand(J(this,this.rowExpandedReserveRowMap),!0),this.treeExpandedMaps=r?G(this,x):[],r&&t.reserve&&this.setTreeExpand(J(this,this.treeExpandedReserveRowMap),!0)},getRadioReserveRecord:function(e){var t=this.fullDataRowIdData,r=this.radioReserveRow,n=this.radioOpts,o=this.afterFullData,h=this.treeConfig,c=this.treeOpts,f=c.children||c.childrenField;if(n.reserve&&r){var v=(0,d.getRowid)(this,r);if(e){if(!t[v])return r}else{var m=(0,d.getRowkey)(this);if(h){if(l.default.findTree(o,(function(e){return v===l.default.get(e,m)}),{children:f}))return r}else if(!o.some((function(e){return v===l.default.get(e,m)})))return r}}return null},clearRadioReserve:function(){return this.radioReserveRow=null,this.$nextTick()},handleRadioReserveRow:function(e){this.radioOpts.reserve&&(this.radioReserveRow=e)},getCheckboxReserveRecords:function(e){var t=this,r=this.fullDataRowIdData,n=this.afterFullData,o=this.checkboxReserveRowMap,h=this.checkboxOpts,c=this.treeConfig,f=this.treeOpts,v=f.children||f.childrenField,m=[];if(h.reserve){var w={};c?l.default.eachTree(n,(function(e){w[(0,d.getRowid)(t,e)]=1}),{children:v}):n.forEach((function(e){w[(0,d.getRowid)(t,e)]=1})),l.default.each(o,(function(t,n){t&&(e?r[n]||m.push(t):w[n]||m.push(t))}))}return m},clearCheckboxReserve:function(){return this.checkboxReserveRowMap={},this.$nextTick()},handleCheckboxReserveRow:function(e,t){var r=this.checkboxReserveRowMap;if(this.checkboxOpts.reserve){var n=(0,d.getRowid)(this,e);t?r[n]=e:r[n]&&delete r[n]}},triggerCheckAllEvent:function(e,t){this.handleCheckedAllCheckboxRow(t),this.emitEvent("checkbox-all",{records:this.getCheckboxRecords(),reserves:this.getCheckboxReserveRecords(),indeterminates:this.getCheckboxIndeterminateRecords(),checked:t},e)},toggleAllCheckboxRow:function(){return this.triggerCheckAllEvent(null,!this.isAllSelected),this.$nextTick()},clearCheckboxRow:function(){var e=this,t=this.tableFullData,r=this.treeConfig,n=this.treeOpts,o=this.checkboxOpts,h=o.checkField,c=o.reserve,d=n.children||n.childrenField,f=o.indeterminateField||o.halfField;if(h){var v=function(e){r&&f&&l.default.set(e,f,!1),l.default.set(e,h,!1)};r?l.default.eachTree(t,v,{children:d}):t.forEach(v)}return c&&t.forEach((function(t){return e.handleCheckboxReserveRow(t,!1)})),this.isAllSelected=!1,this.isIndeterminate=!1,this.selectCheckboxMaps={},this.treeIndeterminateMaps={},this.$nextTick()},handleDefaultRadioChecked:function(){var e=this.radioOpts,t=this.fullDataRowIdData,r=e.checkRowKey,n=e.reserve;if(r&&(t[r]&&this.handleCheckedRadioRow(t[r].row,!0),n)){var l=(0,d.getRowkey)(this);this.radioReserveRow=I({},l,r)}},triggerRadioRowEvent:function(e,t){var r=this.selectRadioRow,n=this.radioOpts,l=t.row,o=r!==l;o?this.handleCheckedRadioRow(l):n.strict||(o=r===l)&&(l=null,this.clearRadioRow()),o&&this.emitEvent("radio-change",M({oldValue:r,newValue:l},t),e)},triggerCurrentRowEvent:function(e,t){var r=this.currentRow,n=t.row,l=r!==n;this.setCurrentRow(n),l&&this.emitEvent("current-change",M({oldValue:r,newValue:n},t),e)},setCurrentRow:function(e){var t=this.$el,r=this.rowOpts;return this.clearCurrentRow(),this.currentRow=e,(r.isCurrent||this.highlightCurrentRow)&&t&&l.default.arrayEach(t.querySelectorAll('[rowid="'.concat((0,d.getRowid)(this,e),'"]')),(function(e){return z(e,"row--current")})),this.$nextTick()},isCheckedByRadioRow:function(e){return this.selectRadioRow===e},handleCheckedRadioRow:function(e,t){var r=this.radioOpts.checkMethod;return e&&(t||!r||r({row:e}))&&(this.selectRadioRow=e,this.handleRadioReserveRow(e)),this.$nextTick()},setRadioRow:function(e){return this.handleCheckedRadioRow(e,!0)},clearCurrentRow:function(){var e=this.$el;return this.currentRow=null,this.hoverRow=null,e&&l.default.arrayEach(e.querySelectorAll(".row--current"),(function(e){return V(e,"row--current")})),this.$nextTick()},clearRadioRow:function(){return this.selectRadioRow=null,this.$nextTick()},getCurrentRecord:function(){return this.rowOpts.isCurrent||this.highlightCurrentRow?this.currentRow:null},getRadioRecord:function(e){var t=this.selectRadioRow,r=this.fullDataRowIdData,n=this.afterFullRowMaps;if(t){var l=(0,d.getRowid)(this,t);if(e){if(!r[l])return t}else if(n[l])return t}return null},triggerHoverEvent:function(e,t){var r=t.row;this.setHoverRow(r)},setHoverRow:function(e){var t=this.$el,r=(0,d.getRowid)(this,e);this.clearHoverRow(),t&&l.default.arrayEach(t.querySelectorAll('[rowid="'.concat(r,'"]')),(function(e){return z(e,"row--hover")})),this.hoverRow=e},clearHoverRow:function(){var e=this.$el;e&&l.default.arrayEach(e.querySelectorAll(".vxe-body--row.row--hover"),(function(e){return V(e,"row--hover")})),this.hoverRow=null},triggerHeaderCellClickEvent:function(e,t){var r=this._lastResizeTime,n=this.sortOpts,l=t.column,o=e.currentTarget,h=r&&r>Date.now()-300,c=H(e,o,"vxe-cell--sort").flag,d=H(e,o,"vxe-cell--filter").flag;return"cell"!==n.trigger||h||c||d||this.triggerSortEvent(e,l,U(this,l)),this.emitEvent("header-cell-click",Object.assign({triggerResizable:h,triggerSort:c,triggerFilter:d,cell:o},t),e),this.columnOpts.isCurrent||this.highlightCurrentColumn?this.setCurrentColumn(l):this.$nextTick()},triggerHeaderCellDblclickEvent:function(e,t){this.emitEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},getCurrentColumn:function(){return this.columnOpts.isCurrent||this.highlightCurrentColumn?this.currentColumn:null},setCurrentColumn:function(e){var t=(0,d.handleFieldOrColumn)(this,e);return t&&(this.clearCurrentColumn(),this.currentColumn=t),this.$nextTick()},clearCurrentColumn:function(){return this.currentColumn=null,this.$nextTick()},checkValidate:function(e){return c.default._valid?this.triggerValidate(e):this.$nextTick()},handleChangeCell:function(e,t){var r=this;this.checkValidate("blur").catch((function(e){return e})).then((function(){r.handleActived(t,e).then((function(){return r.checkValidate("change")})).catch((function(e){return e}))}))},triggerCellClickEvent:function(e,t){var r=this.highlightCurrentRow,n=this.editStore,l=this.radioOpts,o=this.expandOpts,h=this.treeOpts,c=this.editConfig,d=this.editOpts,v=this.checkboxOpts,m=this.rowOpts,w=n.actived,x=t,C=x.row,R=x.column,y=R.type,T=R.treeNode,E="radio"===y,S="checkbox"===y,k="expand"===y,D=e.currentTarget,M=E&&H(e,D,"vxe-cell--radio").flag,I=S&&H(e,D,"vxe-cell--checkbox").flag,O=T&&H(e,D,"vxe-tree--btn-wrapper").flag,F=k&&H(e,D,"vxe-table--expanded").flag;t=Object.assign({cell:D,triggerRadio:M,triggerCheckbox:I,triggerTreeNode:O,triggerExpandNode:F},t),I||M||(!F&&("row"===o.trigger||k&&"cell"===o.trigger)&&this.triggerRowExpandEvent(e,t),("row"===h.trigger||T&&"cell"===h.trigger)&&this.triggerTreeExpandEvent(e,t)),O||(F||((m.isCurrent||r)&&(I||M||this.triggerCurrentRowEvent(e,t)),!M&&("row"===l.trigger||E&&"cell"===l.trigger)&&this.triggerRadioRowEvent(e,t),!I&&("row"===v.trigger||S&&"cell"===v.trigger)&&this.handleToggleCheckRowEvent(e,t)),(0,f.isEnableConf)(c)&&("manual"===d.trigger?w.args&&w.row===C&&R!==w.column&&this.handleChangeCell(e,t):w.args&&C===w.row&&R===w.column||("click"===d.trigger||"dblclick"===d.trigger&&"row"===d.mode&&w.row===C)&&this.handleChangeCell(e,t))),this.emitEvent("cell-click",t,e)},triggerCellDblclickEvent:function(e,t){var r=this,n=this.editStore,l=this.editConfig,o=this.editOpts,h=n.actived,c=e.currentTarget;t.cell=c,(0,f.isEnableConf)(l)&&"dblclick"===o.trigger&&(h.args&&e.currentTarget===h.args.cell||("row"===o.mode?this.checkValidate("blur").catch((function(e){return e})).then((function(){r.handleActived(t,e).then((function(){return r.checkValidate("change")})).catch((function(e){return e}))})):"cell"===o.mode&&this.handleActived(t,e).then((function(){return r.checkValidate("change")})).catch((function(e){return e})))),this.emitEvent("cell-dblclick",t,e)},handleDefaultSort:function(){var e=this,t=this.sortConfig,r=this.sortOpts,n=r.defaultSort;n&&(l.default.isArray(n)||(n=[n]),n.length&&((t.multiple?n:n.slice(0,1)).forEach((function(t,r){var n=t.field,l=t.order;if(n&&l){var o=e.getColumnByField(n);o&&o.sortable&&(o.order=l,o.sortTime=Date.now()+r)}})),r.remote||this.handleTableData(!0).then(this.updateStyle)))},triggerSortEvent:function(e,t,r){var n=this.sortOpts,l=t.field,o=t.sortable,h=t.remoteSort;if(o||h){r&&t.order!==r?this.sort({field:l,order:r}):this.clearSort(n.multiple?t:null);var c={$table:this,$event:e,column:t,field:l,property:l,order:t.order,sortList:this.getSortColumns(),sortTime:t.sortTime};this.mouseConfig&&this.mouseOpts.area&&this.handleSortEvent&&this.handleSortEvent(e,c),this.emitEvent("sort-change",c,e)}},setPendingRow:function(e,t){var r=this,n=M({},this.pendingRowMaps),o=T(this.pendingRowList);return e&&!l.default.isArray(e)&&(e=[e]),t?e.forEach((function(e){var t=(0,d.getRowid)(r,e);t&&!n[t]&&(o.push(e),n[t]=e)})):e.forEach((function(e){var t=(0,d.getRowid)(r,e);if(t&&n[t]){var l=r.findRowIndexOf(o,e);l>-1&&o.splice(l,1),delete n[t]}})),this.pendingRowMaps=n,this.pendingRowList=o,this.$nextTick()},togglePendingRow:function(e){var t=this,r=M({},this.pendingRowMaps),n=T(this.pendingRowList);return e&&!l.default.isArray(e)&&(e=[e]),e.forEach((function(e){var l=(0,d.getRowid)(t,e);if(l)if(r[l]){var o=t.findRowIndexOf(n,e);o>-1&&n.splice(o,1),delete r[l]}else n.push(e),r[l]=e})),this.pendingRowMaps=r,this.pendingRowList=n,this.$nextTick()},getPendingRecords:function(){return this.pendingRowList.slice(0)},hasPendingByRow:function(e){return!!this.pendingRowMaps[(0,d.getRowid)(this,e)]},clearPendingRow:function(){return this.pendingRowMaps={},this.pendingRowList=[],this.$nextTick()},sort:function(e,t){var r,n=this,o=this.sortOpts,h=o.multiple,c=o.remote,d=o.orders;return e&&l.default.isString(e)&&(e=[{field:e,order:t}]),l.default.isArray(e)||(e=[e]),e.length?(h||ie(this),(h?e:[e[0]]).forEach((function(e,t){var o=e.field,h=e.order,c=o;l.default.isString(o)&&(c=n.getColumnByField(o)),c&&(c.sortable||c.remoteSort)&&(r||(r=c),-1===d.indexOf(h)&&(h=U(n,c)),c.order!==h&&(c.order=h),c.sortTime=Date.now()+t)})),(!c||r&&r.remoteSort)&&this.handleTableData(!0),this.$nextTick().then((function(){return n.updateCellAreas(),n.updateStyle()}))):this.$nextTick()},clearSort:function(e){var t=this.sortOpts;if(e){var r=(0,d.handleFieldOrColumn)(this,e);r&&(r.order=null)}else ie(this);return t.remote||this.handleTableData(!0),this.$nextTick().then(this.updateStyle)},getSortColumn:function(){return l.default.find(this.tableFullColumn,(function(e){return(e.sortable||e.remoteSort)&&e.order}))},isSort:function(e){if(e){var t=(0,d.handleFieldOrColumn)(this,e);return t&&t.sortable&&!!t.order}return this.getSortColumns().length>0},getSortColumns:function(){var e=this.sortOpts,t=e.multiple,r=e.chronological,n=[];return this.tableFullColumn.forEach((function(e){var t=e.field,r=e.order;(e.sortable||e.remoteSort)&&r&&n.push({column:e,field:t,property:t,order:r,sortTime:e.sortTime})})),t&&r&&n.length>1?l.default.orderBy(n,"sortTime"):n},closeFilter:function(){var e=this.filterStore,t=e.column,r=e.visible;return Object.assign(e,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),r&&this.emitEvent("filter-visible",{column:t,field:t.field,property:t.field,filterList:this.getCheckedFilters(),visible:!1},null),this.$nextTick()},isActiveFilterByColumn:function(e){var t=(0,d.handleFieldOrColumn)(this,e);return t?t.filters&&t.filters.some((function(option){return option.checked})):this.getCheckedFilters().length>0},isFilter:function(e){return this.isActiveFilterByColumn(e)},isRowExpandLoaded:function(e){var t=this.fullAllDataRowMap.get(e);return t&&t.expandLoaded},clearRowExpandLoaded:function(e){var t=this.expandOpts,r=this.rowExpandLazyLoadedMaps,n=this.fullAllDataRowMap,l=t.lazy,o=(0,d.getRowid)(this,e),h=n.get(e);if(l&&h){h.expandLoaded=!1;var c=M({},r);c[o]&&delete c[o],this.rowExpandLazyLoadedMaps=c}return this.$nextTick()},reloadRowExpand:function(e){var t=this,r=this.expandOpts,n=this.rowExpandLazyLoadedMaps,l=r.lazy,o=(0,d.getRowid)(this,e);return l&&!n[o]&&this.clearRowExpandLoaded(e).then((function(){return t.handleAsyncRowExpand(e)})),this.$nextTick()},reloadExpandContent:function(e){return this.reloadRowExpand(e)},triggerRowExpandEvent:function(e,t){var r=this.expandOpts,n=this.rowExpandLazyLoadedMaps,l=this.expandColumn,o=t.row,h=r.lazy,c=(0,d.getRowid)(this,o);if(!h||!n[c]){var f=!this.isRowExpandByRow(o),v=this.getColumnIndex(l),m=this.getVMColumnIndex(l);this.setRowExpand(o,f),this.emitEvent("toggle-row-expand",{expanded:f,column:l,columnIndex:v,$columnIndex:m,row:o,rowIndex:this.getRowIndex(o),$rowIndex:this.getVMRowIndex(o)},e)}},toggleRowExpand:function(e){return this.setRowExpand(e,!this.isRowExpandByRow(e))},handleDefaultRowExpand:function(){var e=this.expandOpts,t=this.fullDataRowIdData,r=e.expandAll,n=e.expandRowKeys;if(r)this.setAllRowExpand(!0);else if(n){var l=[];n.forEach((function(e){t[e]&&l.push(t[e].row)})),this.setRowExpand(l,!0)}},setAllRowExpand:function(e){var t=this.treeConfig,r=this.treeOpts,n=this.tableFullData,o=this.tableFullTreeData,h=r.children||r.childrenField,c=[];return t?l.default.eachTree(o,(function(e){c.push(e)}),{children:h}):c=n,this.setRowExpand(c,e)},handleAsyncRowExpand:function(e){var t=this,r=this.fullAllDataRowMap,n=this.expandOpts,l=r.get(e);return new Promise((function(r){var o=n.loadMethod;if(o){var h=M({},t.rowExpandLazyLoadedMaps),c=(0,d.getRowid)(t,e);h[c]=e,t.rowExpandLazyLoadedMaps=h,o({$table:t,row:e,rowIndex:t.getRowIndex(e),$rowIndex:t.getVMRowIndex(e)}).then((function(){l.expandLoaded=!0;var r=M({},t.rowExpandedMaps);r[c]=e,t.rowExpandedMaps=r})).catch((function(){l.expandLoaded=!1})).finally((function(){var e=M({},t.rowExpandLazyLoadedMaps);e[c]&&delete e[c],t.rowExpandLazyLoadedMaps=e,r(t.$nextTick().then(t.recalculate))}))}else r()}))},setRowExpand:function(e,t){var r=this,n=this.rowExpandedMaps,o=this.fullAllDataRowIdData,h=this.rowExpandLazyLoadedMaps,c=this.expandOpts,f=this.expandColumn,v=M({},n),m=c.reserve,w=c.lazy,x=c.accordion,C=c.toggleMethod,R=[],y=this.getColumnIndex(f),T=this.getVMColumnIndex(f);if(e){l.default.isArray(e)||(e=[e]),x&&(v={},e=e.slice(e.length-1,e.length));var E=C?e.filter((function(e){return C({expanded:t,column:f,columnIndex:y,$columnIndex:T,row:e,rowIndex:r.getRowIndex(e),$rowIndex:r.getVMRowIndex(e)})})):e;t?E.forEach((function(e){var t=(0,d.getRowid)(r,e);if(!v[t]){var n=o[t];w&&!n.expandLoaded&&!h[t]?R.push(r.handleAsyncRowExpand(e)):v[t]=e}})):E.forEach((function(e){var t=(0,d.getRowid)(r,e);v[t]&&delete v[t]})),m&&E.forEach((function(e){return r.handleRowExpandReserve(e,t)}))}return this.rowExpandedMaps=v,Promise.all(R).then(this.recalculate)},isRowExpandByRow:function(e){return!!this.rowExpandedMaps[(0,d.getRowid)(this,e)]},isExpandByRow:function(e){return this.isRowExpandByRow(e)},clearRowExpand:function(){var e=this,t=this.expandOpts,r=this.tableFullData,n=t.reserve,l=this.getRowExpandRecords();return this.rowExpandedMaps={},n&&r.forEach((function(t){return e.handleRowExpandReserve(t,!1)})),this.$nextTick().then((function(){l.length&&e.recalculate()}))},clearRowExpandReserve:function(){return this.rowExpandedReserveRowMap={},this.$nextTick()},handleRowExpandReserve:function(e,t){var r=this.rowExpandedReserveRowMap;if(this.expandOpts.reserve){var n=(0,d.getRowid)(this,e);t?r[n]=e:r[n]&&delete r[n]}},getRowExpandRecords:function(){var e=[];return l.default.each(this.rowExpandedMaps,(function(t){t&&e.push(t)})),e},getTreeExpandRecords:function(){var e=[];return l.default.each(this.treeExpandedMaps,(function(t){t&&e.push(t)})),e},getTreeStatus:function(){return this.treeConfig?{config:this.treeOpts,rowExpandeds:this.getTreeExpandRecords()}:null},isTreeExpandLoaded:function(e){var t=this.fullAllDataRowMap.get(e);return t&&t.treeLoaded},clearTreeExpandLoaded:function(e){var t=this.treeOpts,r=this.treeExpandedMaps,n=this.fullAllDataRowMap,l=t.transform,o=t.lazy,h=(0,d.getRowid)(this,e),c=n.get(e);return o&&c&&(c.treeLoaded=!1,r[h]&&delete r[h]),l?(this.handleVirtualTreeToList(),this.handleTableData()):this.$nextTick()},reloadTreeExpand:function(e){var t=this,r=this.treeOpts,n=this.treeExpandLazyLoadedMaps,l=r.transform,o=r.lazy,h=r.hasChild||r.hasChildField,c=(0,d.getRowid)(this,e);return o&&e[h]&&!n[c]&&this.clearTreeExpandLoaded(e).then((function(){return t.handleAsyncTreeExpandChilds(e)})).then((function(){if(l)return t.handleVirtualTreeToList(),t.handleTableData()})).then((function(){return t.recalculate()})),this.$nextTick()},reloadTreeChilds:function(e){return this.reloadTreeExpand(e)},triggerTreeExpandEvent:function(e,t){var r=this.treeOpts,n=this.treeExpandLazyLoadedMaps,l=t.row,o=t.column,h=r.lazy,c=(0,d.getRowid)(this,l);if(!h||!n[c]){var f=!this.isTreeExpandByRow(l),v=this.getColumnIndex(o),m=this.getVMColumnIndex(o);this.setTreeExpand(l,f),this.emitEvent("toggle-tree-expand",{expanded:f,column:o,columnIndex:v,$columnIndex:m,row:l},e)}},toggleTreeExpand:function(e){return this.setTreeExpand(e,!this.isTreeExpandByRow(e))},handleDefaultTreeExpand:function(){var e=this.treeConfig,t=this.treeOpts,r=this.tableFullData;if(e){var n=t.expandAll,o=t.expandRowKeys,h=t.children||t.childrenField;if(n)this.setAllTreeExpand(!0);else if(o){var c=[],f=(0,d.getRowkey)(this);o.forEach((function(e){var t=l.default.findTree(r,(function(t){return e===l.default.get(t,f)}),{children:h});t&&c.push(t.item)})),this.setTreeExpand(c,!0)}}},handleAsyncTreeExpandChilds:function(e){var t=this,r=this.treeOpts,n=this.checkboxOpts,o=r.transform,h=r.loadMethod,c=n.checkStrictly;return new Promise((function(r){if(h){var n=t.fullAllDataRowMap,f=t.treeExpandLazyLoadedMaps,v=(0,d.getRowid)(t,e),m=n.get(e);f[v]=e,h({$table:t,row:e}).then((function(r){if(m.treeLoaded=!0,f[v]&&(f[v]=null),l.default.isArray(r)||(r=[]),r)return t.loadTreeChildren(e,r).then((function(r){var n=M({},t.treeExpandedMaps);return r.length&&!n[v]&&(n[v]=e,t.treeExpandedMaps=n),!c&&t.isCheckedByCheckboxRow(e)&&t.handleCheckedCheckboxRow(r,!0,!0),t.$nextTick().then((function(){if(o)return t.handleTableData()}))}))})).catch((function(){m.treeLoaded=!1;var e=t.treeExpandLazyLoadedMaps;e[v]&&(e[v]=null)})).finally((function(){t.$nextTick().then((function(){return t.recalculate()})).then((function(){return r()}))}))}else r()}))},setAllTreeExpand:function(e){var t=this.tableFullData,r=this.treeOpts,n=r.lazy,o=r.children||r.childrenField,h=[];return l.default.eachTree(t,(function(e){var t=e[o];(n||t&&t.length)&&h.push(e)}),{children:o}),this.setTreeExpand(h,e)},handleBaseTreeExpand:function(e,t){var r=this,n=this.fullAllDataRowMap,o=this.tableFullData,h=this.treeExpandedMaps,c=this.treeOpts,f=this.treeExpandLazyLoadedMaps,v=this.treeNodeColumn,m=c.reserve,w=c.lazy,x=c.accordion,C=c.toggleMethod,R=M({},h),y=c.children||c.childrenField,T=c.hasChild||c.hasChildField,E=[],S=this.getColumnIndex(v),k=this.getVMColumnIndex(v),D=C?e.filter((function(e){return C({expanded:t,column:v,columnIndex:S,$columnIndex:k,row:e})})):e;if(x){D=D.length?[D[D.length-1]]:[];var I=l.default.findTree(o,(function(e){return e===D[0]}),{children:y});I&&I.items.forEach((function(e){var t=(0,d.getRowid)(r,e);R[t]&&delete R[t]}))}return t?D.forEach((function(e){var t=(0,d.getRowid)(r,e);if(!R[t]){var l=n.get(e);w&&e[T]&&!l.treeLoaded&&!f[t]?E.push(r.handleAsyncTreeExpandChilds(e)):e[y]&&e[y].length&&(R[t]=e)}})):D.forEach((function(e){var t=(0,d.getRowid)(r,e);R[t]&&delete R[t]})),m&&D.forEach((function(e){return r.handleTreeExpandReserve(e,t)})),this.treeExpandedMaps=R,Promise.all(E).then(this.recalculate)},handleVirtualTreeExpand:function(e,t){var r=this;return this.handleBaseTreeExpand(e,t).then((function(){return r.handleVirtualTreeToList(),r.handleTableData()})).then((function(){return r.recalculate()}))},setTreeExpand:function(e,t){var r=this.treeOpts.transform;return e&&(l.default.isArray(e)||(e=[e]),e.length)?r?this.handleVirtualTreeExpand(e,t):this.handleBaseTreeExpand(e,t):this.$nextTick()},isTreeExpandByRow:function(e){return!!this.treeExpandedMaps[(0,d.getRowid)(this,e)]},clearTreeExpand:function(){var e=this,t=this.treeOpts,r=this.tableFullData,n=t.transform,o=t.reserve,h=t.children||t.childrenField,c=this.getTreeExpandRecords();return this.treeExpandedMaps={},o&&l.default.eachTree(r,(function(t){return e.handleTreeExpandReserve(t,!1)}),{children:h}),this.handleTableData().then((function(){if(n)return e.handleVirtualTreeToList(),e.handleTableData()})).then((function(){c.length&&e.recalculate()}))},clearTreeExpandReserve:function(){return this.treeExpandedReserveRowMap={},this.$nextTick()},handleTreeExpandReserve:function(e,t){var r=this.treeExpandedReserveRowMap;if(this.treeOpts.reserve){var n=(0,d.getRowid)(this,e);t?r[n]=e:r[n]&&delete r[n]}},getScroll:function(){var e=this.$refs,t=this.scrollXLoad,r=this.scrollYLoad,n=e.tableBody.$el;return{virtualX:t,virtualY:r,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}},triggerScrollXEvent:function(){this.loadScrollXData()},loadScrollXData:function(){var e=this.mergeList,t=this.mergeFooterList,r=this.scrollXStore,n=r.startIndex,l=r.endIndex,o=r.offsetSize,h=Z(this),c=h.toVisibleIndex,d=h.visibleSize,f={startIndex:Math.max(0,c-1-o),endIndex:c+d+o};Q(e.concat(t),f,"col");var v=f.startIndex,m=f.endIndex;(c<=n||c>=l-d-1)&&(n===v&&l===m||(r.startIndex=v,r.endIndex=m,this.updateScrollXData())),this.closeTooltip()},triggerScrollYEvent:function(e){var t=this.scrollYStore,r=t.adaptive,n=t.offsetSize,l=t.visibleSize;W&&r&&2*n+l<=40?this.loadScrollYData(e):this.debounceScrollY(e)},debounceScrollY:l.default.debounce((function(e){this.loadScrollYData(e)}),N,{leading:!1,trailing:!0}),loadScrollYData:function(e){var t=this.mergeList,r=this.scrollYStore,n=r.startIndex,l=r.endIndex,o=r.visibleSize,h=r.offsetSize,c=r.rowHeight,d=(e.currentTarget||e.target).scrollTop,f=Math.floor(d/c),v={startIndex:Math.max(0,f-1-h),endIndex:f+o+h};Q(t,v,"row");var m=v.startIndex,w=v.endIndex;(f<=n||f>=l-o-1)&&(n===m&&l===w||(r.startIndex=m,r.endIndex=w,this.updateScrollYData()))},computeScrollLoad:function(){var e=this;return this.$nextTick().then((function(){var t=e.sYOpts,r=e.sXOpts,n=e.scrollXLoad,o=e.scrollYLoad,h=e.scrollXStore,c=e.scrollYStore;if(n){var d=Z(e).visibleSize,f=r.oSize?l.default.toNumber(r.oSize):v.browse.msie?10:v.browse.edge?5:0;h.offsetSize=f,h.visibleSize=d,h.endIndex=Math.max(h.startIndex+h.visibleSize+f,h.endIndex),e.updateScrollXData()}else e.updateScrollXSpace();var m=function(e){var t=e.$refs,r=e.vSize,n=e.rowHeightMaps,l=t.tableHeader,o=t.tableBody,h=o?o.$el:null;if(h){var c,d=l?l.$el:null,f=0;return!(c=h.querySelector("tr"))&&d&&(c=d.querySelector("tr")),c&&(f=c.clientHeight),f||(f=n[r||"default"]),{rowHeight:f,visibleSize:Math.max(8,Math.ceil(h.clientHeight/f)+2)}}return{rowHeight:0,visibleSize:8}}(e),w=m.rowHeight,x=m.visibleSize;if(c.rowHeight=w,o){var C=t.oSize?l.default.toNumber(t.oSize):v.browse.msie?20:v.browse.edge?10:0;c.offsetSize=C,c.visibleSize=x,c.endIndex=Math.max(c.startIndex+x+C,c.endIndex),e.updateScrollYData()}else e.updateScrollYSpace();e.rowHeight=w,e.$nextTick(e.updateStyle)}))},handleTableColumn:function(){var e=this.scrollXLoad,t=this.visibleColumn,r=this.scrollXStore;this.tableColumn=e?t.slice(r.startIndex,r.endIndex):t.slice(0)},updateScrollXData:function(){var e=this;this.$nextTick((function(){e.handleTableColumn(),e.updateScrollXSpace()}))},updateScrollXSpace:function(){var e=this.$refs,t=this.isGroup,r=this.elemStore,n=this.visibleColumn,l=this.scrollXStore,o=this.scrollXLoad,h=this.tableWidth,c=this.scrollbarWidth,d=e.tableHeader,f=e.tableBody,v=e.tableFooter,m=f?f.$el:null;if(m){var w=d?d.$el:null,x=v?v.$el:null,C=w?w.querySelector(".vxe-table--header"):null,R=m.querySelector(".vxe-table--body"),y=x?x.querySelector(".vxe-table--footer"):null,T=n.slice(0,l.startIndex).reduce((function(e,t){return e+t.renderWidth}),0),E="";o&&(E="".concat(T,"px")),C&&(C.style.marginLeft=t?"":E),R.style.marginLeft=E,y&&(y.style.marginLeft=E);["main"].forEach((function(e){["header","body","footer"].forEach((function(t){var n=r["".concat(e,"-").concat(t,"-xSpace")];n&&(n.style.width=o?"".concat(h+("header"===t?c:0),"px"):"")}))})),this.$nextTick(this.updateStyle)}},updateScrollYData:function(){var e=this;this.$nextTick((function(){e.handleTableData(),e.updateScrollYSpace()}))},updateScrollYSpace:function(){var e=this.elemStore,t=this.scrollYStore,r=this.scrollYLoad,n=this.afterFullData,l=t.startIndex,o=t.rowHeight,h=n.length*o,c=Math.max(0,l*o),d="",f="";r&&(d="".concat(c,"px"),f="".concat(h,"px")),["main","left","right"].forEach((function(t){var r=e["".concat(t,"-body-table")];r&&(r.style.marginTop=d),["header","body","footer"].forEach((function(r){var n=e["".concat(t,"-").concat(r,"-ySpace")];n&&(n.style.height=f)}))})),this.$nextTick(this.updateStyle)},scrollTo:function(e,t){var r=this,n=this.$refs,o=n.tableBody,h=n.rightBody,c=n.tableFooter,d=o?o.$el:null,f=h?h.$el:null,m=c?c.$el:null;return l.default.isNumber(e)&&(0,v.setScrollLeft)(m||d,e),l.default.isNumber(t)&&(0,v.setScrollTop)(f||d,t),this.scrollXLoad||this.scrollYLoad?new Promise((function(e){return setTimeout((function(){return e(r.$nextTick())}),50)})):this.$nextTick()},scrollToRow:function(e,t){var r=[];return e&&(this.treeConfig?r.push(this.scrollToTreeRow(e)):r.push((0,d.rowToVisible)(this,e))),t&&r.push(this.scrollToColumn(t)),Promise.all(r)},scrollToColumn:function(e){var t=(0,d.handleFieldOrColumn)(this,e);return t&&this.fullColumnMap.has(t)?(0,d.colToVisible)(this,t):this.$nextTick()},scrollToTreeRow:function(e){var t=this,r=this.tableFullData,n=this.treeConfig,o=this.treeOpts,h=o.children||o.childrenField,c=[];if(n){var f=l.default.findTree(r,(function(t){return t===e}),{children:h});if(f){var v=f.nodes;v.forEach((function(e,r){r<v.length-1&&!t.isTreeExpandByRow(e)&&c.push(t.setTreeExpand(e,!0))}))}}return Promise.all(c).then((function(){return(0,d.rowToVisible)(t,e)}))},clearScroll:function(){var e=this.$refs,t=this.scrollXStore,r=this.scrollYStore,n=e.tableBody,l=e.rightBody,o=e.tableFooter,h=n?n.$el:null,c=l?l.$el:null,f=o?o.$el:null;return c&&((0,d.restoreScrollListener)(c),c.scrollTop=0),f&&(f.scrollLeft=0),h&&((0,d.restoreScrollListener)(h),h.scrollTop=0,h.scrollLeft=0),t.startIndex=0,r.startIndex=0,this.$nextTick()},updateFooter:function(){var e=this.showFooter,t=this.visibleColumn,r=this.footerMethod;return e&&r&&(this.footerTableData=t.length?r({columns:t,data:this.afterFullData,$table:this,$grid:this.$xegrid}):[]),this.$nextTick()},updateStatus:function(e,t){var r=this,n=!l.default.isUndefined(t);return this.$nextTick().then((function(){var l=r.$refs,o=r.editRules,h=r.validStore,c=l.tableBody;if(e&&c&&o){var d=e.row,f=e.column,v="change";if(r.hasCellRules&&r.hasCellRules(v,d,f)){var m=r.getCell(d,f);if(m)return r.validCellRules(v,d,f,t).then((function(){n&&h.visible&&O(d,f,t),r.clearValidate(d,f)})).catch((function(e){var l=e.rule;n&&O(d,f,t),r.showValidTooltip({rule:l,row:d,column:f,cell:m})}))}}}))},handleDefaultMergeCells:function(){this.setMergeCells(this.mergeCells)},setMergeCells:function(e){var t=this;return this.spanMethod&&(0,w.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]),ee(this,e,this.mergeList,this.afterFullData),this.$nextTick().then((function(){return t.updateCellAreas()}))},removeMergeCells:function(e){var t=this;this.spanMethod&&(0,w.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]);var r=te(this,e,this.mergeList,this.afterFullData);return this.$nextTick().then((function(){return t.updateCellAreas(),r}))},getMergeCells:function(){return this.mergeList.slice(0)},clearMergeCells:function(){return this.mergeList=[],this.$nextTick()},handleDefaultMergeFooterItems:function(){this.setMergeFooterItems(this.mergeFooterItems)},setMergeFooterItems:function(e){var t=this;return this.footerSpanMethod&&(0,w.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),ee(this,e,this.mergeFooterList,null),this.$nextTick().then((function(){return t.updateCellAreas()}))},removeMergeFooterItems:function(e){var t=this;this.footerSpanMethod&&(0,w.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);var r=te(this,e,this.mergeFooterList,null);return this.$nextTick().then((function(){return t.updateCellAreas(),r}))},getMergeFooterItems:function(){return this.mergeFooterList.slice(0)},clearMergeFooterItems:function(){return this.mergeFooterList=[],this.$nextTick()},updateZindex:function(){this.zIndex?this.tZindex=this.zIndex:this.tZindex<f.default.getLastZIndex()&&(this.tZindex=f.default.nextZIndex())},updateCellAreas:function(){return this.mouseConfig&&this.mouseOpts.area&&this.handleUpdateCellAreas?this.handleUpdateCellAreas():this.$nextTick()},emitEvent:function(e,t,r){this.$emit(e,Object.assign({$table:this,$grid:this.$xegrid,$event:r},t))},focus:function(){return this.isActivated=!0,this.$nextTick()},blur:function(){return this.isActivated=!1,this.$nextTick()},connect:function(e){return e&&e.syncUpdate?(e.syncUpdate({collectColumn:this.collectColumn,$table:this}),this.$toolbar=e):(0,w.errLog)("vxe.error.barUnableLink"),this.$nextTick()},getCell:function(e,t){var r=this.$refs,n=(0,d.getRowid)(this,e),l=null;return t&&(l=r["".concat(t.fixed||"table","Body")]||r.tableBody),l&&l.$el?l.$el.querySelector('.vxe-body--row[rowid="'.concat(n,'"] .').concat(t.id)):null},getCellLabel:function(e,t){var r=t.formatter,n=f.default.getCellValue(e,t),o=n;if(r){var h,c,d=this.fullAllDataRowMap,v=t.id;if(d.has(e)&&((c=(h=d.get(e)).formatData)||(c=d.get(e).formatData={}),h&&c[v]&&c[v].value===n))return c[v].label;var w={cellValue:n,row:e,rowIndex:this.getRowIndex(e),column:t,columnIndex:this.getColumnIndex(t)};if(l.default.isString(r)){var x=m.formats.get(r);o=x&&x.cellFormatMethod?x.cellFormatMethod(w):""}else if(l.default.isArray(r)){var C=m.formats.get(r[0]);o=C&&C.cellFormatMethod?C.cellFormatMethod.apply(C,[w].concat(T(r.slice(1)))):""}else o=r(w);c&&(c[v]={value:n,label:o})}return o},findRowIndexOf:function(e,t){var r=this;return t?l.default.findIndexOf(e,(function(e){return r.eqRow(e,t)})):-1},eqRow:function(e,t){return!(!e||!t)&&(e===t||(0,d.getRowid)(this,e)===(0,d.getRowid)(this,t))},getSetupOptions:function(){return o.default}};"setFilter,openFilter,clearFilter,getCheckedFilters,closeMenu,setActiveCellArea,getActiveCellArea,getCellAreas,clearCellAreas,copyCellArea,cutCellArea,pasteCellArea,getCopyCellArea,getCopyCellAreas,clearCopyCellArea,setCellAreas,openFind,openReplace,closeFNR,getSelectedCell,clearSelected,insert,insertAt,insertNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,clearEdit,clearActived,getEditRecord,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell,setSelectCell,clearValidate,fullValidate,validate,openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").forEach((function(e){ne[e]=function(){return this["_".concat(e)]?this["_".concat(e)].apply(this,arguments):null}}));var le=ne;t.default=le}}]);